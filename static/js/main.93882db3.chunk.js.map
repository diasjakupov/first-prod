{"version":3,"sources":["components/catalog/search.js","components/catalog/book-item.js","service/actions/books-action.js","service/api/books-api.js","components/catalog/book-list.js","service/thunk/books-thunk.js","components/catalog-2/compostion-item.js","components/catalog-2/popular.js","components/catalog-2/main-block.js","components/mainpage/mainpage.js","components/filter-page/filter-block.js","components/filter-page/books-list.js","components/filter-page/paginations.js","components/filter-page/main-block.js","service/actions/profile-action.js","service/api/profile.js","service/thunk/profile.js","service/actions/book-action.js","service/thunk/detail-thunk.js","components/detail-page/rating-popup.js","components/detail-page/chapter-item.js","components/detail-page/review-item.js","components/detail-page/pagination.js","components/detail-page/detail.js","components/detail-page/page.js","components/auth/validator.js","components/auth/input.js","components/auth/login.js","components/auth/register.js","components/auth/image-popup.js","components/auth/profile.js","components/auth/public.js","service/auth/JWT.js","App.js","components/reducers/books.js","components/reducers/detail-book.js","components/reducers/profile.js","store.js","index.js"],"names":["withRouter","history","search","useRef","className","placeholder","ref","xmlns","width","height","fill","viewBox","type","onClick","value","current","push","onSearch","d","item","margin","light","id","src","poster","alt","style","color","title","types","CHANGE_THEME","base_url","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","settings","BooksApi","axios","get","res","status","data","filter","page","access","token","slice","idx","replace","headers","Authorization","book_id","put","likes_update","Error","user_id","star","text","post","user","book","booksApi","getBooks","dispatch","getAllOrFilterBooks","then","GET_BOOKS","window","screen","dots","infinite","speed","slidesToShow","slidesToScroll","arrows","connect","state","books","bookReducer","mostRated","getMostRatedBooks","GET_THE_MOST_RATED","useEffect","map","index","ComposItemMobileWR","background","created_date","ComposItemWR","mostPopular","newest","getMostPopularBooks","GET_THE_MOST_POPULAR","getTheNewestChapters","GET_THE_NEWEST","paddingBottom","genre","category","getCategory","getFilterList","GET_CATEGORY","getTypes","GET_TYPES","getGenre","GET_GENRE","params","filtersRef","searchRef","searchValue","decodeurl","indexOf","getinputValue","checkFilter","dropdownChoices","querySelectorAll","filters","forEach","parentId","parentElement","children","childNodes","checked","textContent","filtered","arr","result","keys","key","Set","concatvalue","undefined","concatFilter","textAlign","defaultValue","display","justifyContent","paddingLeft","paddingRight","fontSize","count","booksLoading","PreviousLabel","NextLabel","numPage","useState","forsePage","setforse","match","num","parseInt","pageCount","pageRangeDisplayed","marginPagesDisplayed","containerClassName","pageClassName","breakClassName","activeClassName","activeLinkClassName","previousLabel","nextLabel","previousClassName","nextClassName","onPageChange","currentPage","selected","newParams","initialPage","forcePage","p","SET_AUTH","DEL_AUTH","localStorage","setItem","Profile","username","password","re_password","gender","first_name","image","api","getMyUser","GET_MY_USER","GET_DETAIL_BOOK","console","log","isOpen","setOpen","isAuth","chosenStar","setStar","setText","JSON","parse","getItem","Fragment","alignItems","xlinkHref","marginBottom","marginTop","rows","cols","outline","border","onChange","e","finishedText","setComment","target","setReview","removeItem","location","reload","publish","to","starPrecent","setPersent","persent","cursor","dangerouslySetInnerHTML","__html","BookDetailReducer","description","views","is_liked","average_rating","chapters","page_count","chapterloading","Chapterloading","bookLoading","reviews","ProfileReducer","myuser","getDetailBook","getChapters","getChapterByBook","GET_CHAPTERS","getReviews","GET_REVIEWS","subUrl","setSub","bookId","setBookId","open","role","overflowX","overflowY","marginRight","setLike","addLike","marginLeft","paddingTop","pages","info","pages_info","pages_loading","getPages","getPagesByChapter","GET_PAGES","picture","maxWidth","required","passwordsMatch","allValues","CustomField","input","label","meta","touched","error","warning","GenderInput","mapStateToProps","LoginForm","props","onSubmit","handleSubmit","values","loginUser","tokens","stringify","refresh","catch","AUTH_ERROR","authError","Field","component","validate","reduxForm","form","RegisterForm","stateErr","putError","profileApi","createUser","err","Object","response","errors","ImagePopUp","inputEl","setRes","load","a","files","FormData","append","setimage","r","Private","initialize","changeMyProfile","books_like","PrivateProfile","getUserById","GET_USER","date_joined","date_joined_id","checkingToken","acc","isToken","isaccess","isrefresh","position","textDecoration","path","MainPage","exact","render","Loginform","initialState","next","previous","action","results","store","createStore","combineReducers","formReducer","applyMiddleware","thunk","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.93882db3.chunk.js","sourcesContent":["import React, { useRef } from \"react\";\r\nimport \"./style.css\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Search = ({ history }) => {\r\n  const search = useRef(null);\r\n\r\n  const onSearch = () => {\r\n    const value = search.current.value;\r\n    history.push(\"/filter/title=\" + value);\r\n  };\r\n  return (\r\n    <div className=\"search-wrapper\">\r\n      <input className=\"search\" placeholder=\"Поиск...\" ref={search} />\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"16\"\r\n        height=\"16\"\r\n        fill=\"currentColor\"\r\n        className=\"bi bi-search search-icon\"\r\n        viewBox=\"0 0 16 16\"\r\n        type=\"button\"\r\n        onClick={() => onSearch()}\r\n      >\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\" />\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(Search);\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst BookItem = ({ item, margin, light, history }) => {\r\n  return (\r\n    <div\r\n      className={\"book-card\" + (margin === 0 ? \" book-card-filter\" : \"\")}\r\n      onClick={() => {\r\n        history.push(`/detail/id=${item.id}`);\r\n      }}\r\n    >\r\n      <img src={item.poster} className=\"book-image\" alt=\"poster\" />\r\n      <h6\r\n        className=\"book-name\"\r\n        style={light ? { color: \"black\" } : { color: \"white\" }}\r\n      >\r\n        {item.title}\r\n      </h6>\r\n      <span\r\n        className=\"book-list-cat\"\r\n        style={light ? { color: \"black\" } : { color: \"white\" }}\r\n      >\r\n        {item.types}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(BookItem);\r\n","const FETCHING_DATA = () => {\r\n  return { type: \"FETCHING_DATA\" };\r\n};\r\n\r\nconst GET_THE_MOST_RATED = (data) => {\r\n  return { type: \"GET_THE_MOST_RATED\", data: data };\r\n};\r\n\r\nconst GET_THE_MOST_POPULAR = (data) => {\r\n  return { type: \"GET_THE_MOST_POPULAR\", data: data };\r\n};\r\n\r\nconst GET_THE_NEWEST = (data) => {\r\n  return { type: \"GET_THE_NEWEST\", data: data };\r\n};\r\n\r\nconst CHANGE_THEME = () => {\r\n  return { type: \"CHANGE_THEME\" };\r\n};\r\n\r\nconst GET_TYPES = (data) => {\r\n  return { type: \"GET_TYPES\", data: data };\r\n};\r\n\r\nconst GET_GENRE = (data) => {\r\n  return { type: \"GET_GENRE\", data: data };\r\n};\r\n\r\nconst GET_CATEGORY = (data) => {\r\n  return { type: \"GET_CATEGORY\", data: data };\r\n};\r\n\r\nconst GET_BOOKS = (data) => {\r\n  return { type: \"GET_BOOKS\", data: data };\r\n};\r\nexport {\r\n  FETCHING_DATA,\r\n  GET_THE_MOST_RATED,\r\n  GET_THE_MOST_POPULAR,\r\n  GET_THE_NEWEST,\r\n  GET_TYPES,\r\n  GET_GENRE,\r\n  GET_CATEGORY,\r\n  GET_BOOKS,\r\n  CHANGE_THEME,\r\n};\r\n","import axios from \"axios\";\r\nconst base_url = \"https://prod-reading.herokuapp.com/\";\r\n\r\nfunction getCookie(name) {\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== \"\") {\r\n    const cookies = document.cookie.split(\";\");\r\n    for (let i = 0; i < cookies.length; i++) {\r\n      const cookie = cookies[i].trim();\r\n      // Does this cookie string begin with the name we want?\r\n      if (cookie.substring(0, name.length + 1) === name + \"=\") {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nclass BooksApi {\r\n  async getMostRatedBooks() {\r\n    const res = await axios.get(\r\n      base_url + \"api/books/filtered?average_rating=1\"\r\n    );\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async getMostPopularBooks() {\r\n    const res = await axios.get(base_url + \"api/books/filtered?views=1\");\r\n\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async getTheNewestChapters() {\r\n    const res = await axios.get(base_url + \"api/books/chapters\");\r\n\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async getFilterList(name) {\r\n    const res = await axios.get(base_url + `api/books/${name}`);\r\n\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async getAllOrFilterBooks(filter) {\r\n    const res = await axios.get(base_url + `api/books/${filter}`);\r\n\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async getChapterByBook(id, page = 1) {\r\n    const res = await axios.get(\r\n      base_url + `api/books/book-detail-c/${id}?page=${page}`\r\n    );\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async getDetailBook(id, access) {\r\n    let token = null;\r\n    if (access) {\r\n      token = access.slice(1, -1);\r\n    }\r\n    const idx = id.replace(\"id=\", \"\");\r\n    let res;\r\n    if (token !== null) {\r\n      res = await axios.get(base_url + `api/books/${idx}`, {\r\n        headers: {\r\n          Authorization: \"JWT \" + access,\r\n        },\r\n      });\r\n    } else {\r\n      res = await axios.get(base_url + `api/books/${idx}`);\r\n    }\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async getPagesByChapter(id) {\r\n    const res = await axios.get(base_url + `api/books/chapter/${id}`);\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async setLike(book_id, access) {\r\n    const res = await axios.put(\r\n      base_url + `api/books/${book_id}`,\r\n      {\r\n        likes_update: 1,\r\n      },\r\n      {\r\n        headers: {\r\n          Authorization: \"JWT \" + access,\r\n        },\r\n      },\r\n      {\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      }\r\n    );\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      throw new Error(\"bad request\");\r\n    }\r\n  }\r\n  async getReviews(id) {\r\n    const res = await axios.get(base_url + `api/books/book-review/${id}`);\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      return 404;\r\n    }\r\n  }\r\n  async setReview(book_id, user_id, star, text, access) {\r\n    const res = await axios.post(\r\n      base_url + `api/books/set_rating`,\r\n      {\r\n        user: user_id,\r\n        book: book_id,\r\n        star: star,\r\n        text: text,\r\n      },\r\n      {\r\n        headers: {\r\n          Authorization: \"JWT \" + access,\r\n        },\r\n      },\r\n      {\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      }\r\n    );\r\n    if (res.status === 201) {\r\n      return res.data;\r\n    } else {\r\n      throw new Error(\"bad request\");\r\n    }\r\n  }\r\n}\r\n\r\nexport default BooksApi;\r\n","import React, { useEffect } from \"react\";\r\nimport Slider from \"react-slick\";\r\nimport BookItem from \"./book-item\";\r\nimport { connect } from \"react-redux\";\r\nimport { getMostRatedBooks } from \"../../service/thunk/books-thunk\";\r\n\r\nlet settings;\r\n\r\nif (window.screen.width > 850) {\r\n  settings = {\r\n    dots: false,\r\n    infinite: false,\r\n    speed: 500,\r\n    slidesToShow: 5,\r\n    slidesToScroll: 1,\r\n  };\r\n} else if (window.screen.width > 600) {\r\n  settings = {\r\n    dots: false,\r\n    infinite: false,\r\n    speed: 500,\r\n    slidesToShow: 3,\r\n    slidesToScroll: 1,\r\n  };\r\n} else {\r\n  settings = {\r\n    dots: false,\r\n    infinite: false,\r\n    arrows: false,\r\n    speed: 500,\r\n    slidesToShow: 2,\r\n    slidesToScroll: 1,\r\n  };\r\n}\r\n\r\nconst BookList = ({ books, getMostRatedBooks }) => {\r\n  useEffect(() => {\r\n    getMostRatedBooks();\r\n  }, [getMostRatedBooks]);\r\n  return (\r\n    <div className=\"books-block\">\r\n      <h4 style={{ color: \"white\" }}>Что почитаем?</h4>\r\n      <div className=\"book-slider\">\r\n        <Slider {...settings}>\r\n          {books.map((item, index) => (\r\n            <BookItem item={item} key={index} />\r\n          ))}\r\n        </Slider>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    books: state.bookReducer.mostRated,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getMostRatedBooks })(BookList);\r\n","import {\r\n  FETCHING_DATA,\r\n  GET_THE_MOST_RATED,\r\n  GET_THE_MOST_POPULAR,\r\n  GET_THE_NEWEST,\r\n  GET_TYPES,\r\n  GET_CATEGORY,\r\n  GET_GENRE,\r\n  GET_BOOKS,\r\n} from \"../actions/books-action\";\r\nimport BooksApi from \"../api/books-api\";\r\n\r\nconst booksApi = new BooksApi();\r\n\r\nconst getMostRatedBooks = () => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_DATA());\r\n    booksApi.getMostRatedBooks().then((data) => {\r\n      dispatch(GET_THE_MOST_RATED(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getMostPopularBooks = () => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_DATA());\r\n    booksApi.getMostPopularBooks().then((data) => {\r\n      dispatch(GET_THE_MOST_POPULAR(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getTheNewestChapters = () => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_DATA());\r\n    booksApi.getTheNewestChapters().then((data) => {\r\n      dispatch(GET_THE_NEWEST(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getTypes = () => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_DATA());\r\n    booksApi.getFilterList(\"types\").then((data) => {\r\n      dispatch(GET_TYPES(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getCategory = () => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_DATA());\r\n    booksApi.getFilterList(\"category\").then((data) => {\r\n      dispatch(GET_CATEGORY(data));\r\n    });\r\n  };\r\n};\r\nconst getGenre = () => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_DATA());\r\n    booksApi.getFilterList(\"genre\").then((data) => {\r\n      dispatch(GET_GENRE(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getBooks = (filter) => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_DATA());\r\n    booksApi.getAllOrFilterBooks(filter).then((data) => {\r\n      dispatch(GET_BOOKS(data));\r\n    });\r\n  };\r\n};\r\nexport {\r\n  getMostRatedBooks,\r\n  getMostPopularBooks,\r\n  getTheNewestChapters,\r\n  getGenre,\r\n  getTypes,\r\n  getCategory,\r\n  getBooks,\r\n};\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport \"./style.css\";\r\n\r\nconst ComposItem = ({ item, light, history }) => {\r\n  return (\r\n    <div\r\n      className=\"new-compos\"\r\n      style={{ background: light ? \"#fafafa\" : \"#191919\" }}\r\n      onClick={() => history.push(`/detail/id=${item.book.id}`)}\r\n    >\r\n      <div className=\"compos-img-wrapper\">\r\n        <img src={item.book.poster} className=\"comspos-img\" alt=\"poster\" />\r\n      </div>\r\n      <div className=\"compos-info\">\r\n        <h6>{item.book.title}</h6>\r\n        <h6>{item.title} </h6>\r\n        <span>{item.created_date}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ComposItemMobile = ({ item, light, history }) => {\r\n  return (\r\n    <div\r\n      className=\"new-compos\"\r\n      style={{ background: light ? \"#fafafa\" : \"#191919\" }}\r\n      onClick={() => history.push(`/detail/id=${item.book.id}`)}\r\n    >\r\n      <div className=\"compos-info\">\r\n        <div className=\"limit-line\">\r\n          <h6 className=\"compos-title\">{item.book.title}</h6>\r\n        </div>\r\n        <div className=\"limit-line\">\r\n          <span>{item.title} </span>\r\n        </div>\r\n        <span>{item.created_date}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ComposItemMobileWR = withRouter(ComposItemMobile);\r\nconst ComposItemWR = withRouter(ComposItem);\r\n\r\nexport { ComposItemMobileWR, ComposItemWR };\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport \"./style.css\";\r\n\r\nconst PopularItem = ({ item, history }) => {\r\n  return (\r\n    <div\r\n      className=\"pop-compos\"\r\n      onClick={() => history.push(`/detail/id=${item.id}`)}\r\n    >\r\n      <div className=\"pop-img-wrapper\">\r\n        <img src={item.poster} className=\"pop-img\" alt=\"poster\" />\r\n      </div>\r\n      <div className=\"pop-info\">\r\n        <h6>{item.title}</h6>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(PopularItem);\r\n","import React, { useEffect } from \"react\";\r\nimport \"./style.css\";\r\nimport { ComposItemWR, ComposItemMobileWR } from \"./compostion-item\";\r\nimport PopularItem from \"./popular\";\r\nimport {\r\n  getMostPopularBooks,\r\n  getTheNewestChapters,\r\n} from \"../../service/thunk/books-thunk\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst Catalog2 = ({\r\n  mostPopular,\r\n  newest,\r\n  light,\r\n  getMostPopularBooks,\r\n  getTheNewestChapters,\r\n}) => {\r\n  useEffect(() => {\r\n    getMostPopularBooks();\r\n    getTheNewestChapters();\r\n  }, [getMostPopularBooks, getTheNewestChapters]);\r\n\r\n  return (\r\n    <div className={\"catalog-2 \" + (light ? \"light-bg\" : \"black-bg\")}>\r\n      <div className=\"line\"></div>\r\n      <div className=\"catalog-2-main-block\">\r\n        <div className=\"row\">\r\n          <div className=\"new-compositions col-12 col-lg-8\">\r\n            <h3 style={{ paddingBottom: \"2rem\" }}>Обновления</h3>\r\n            <div className=\"\">\r\n              {window.screen.width > 900 ? (\r\n                newest.map((item, index) => (\r\n                  <ComposItemWR item={item} key={index} light={light} />\r\n                ))\r\n              ) : (\r\n                <div className=\"new-compos-mob\">\r\n                  {newest.map((item, index) => (\r\n                    <ComposItemMobileWR item={item} key={index} light={light} />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"popular-compos col-12 col-lg-4\">\r\n            <h3 style={{ paddingBottom: \"2rem\" }}>Популярное</h3>\r\n            <div>\r\n              {mostPopular.map((item, index) => (\r\n                <PopularItem item={item} key={index} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className=\"bottom-line\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    mostPopular: state.bookReducer.mostPopular,\r\n    newest: state.bookReducer.newest,\r\n    light: state.bookReducer.light,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  getMostPopularBooks,\r\n  getTheNewestChapters,\r\n})(Catalog2);\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\nimport Search from \"../catalog/search\";\r\nimport BookList from \"../catalog/book-list\";\r\nimport Catalog2 from \"../catalog-2/main-block\";\r\nimport { CHANGE_THEME } from \"../../service/actions/books-action\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst MainPage = ({ CHANGE_THEME }) => {\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <div className=\"bg-im\">\r\n        <div className=\"custom-container\">\r\n          <Search />\r\n          <BookList />\r\n        </div>\r\n      </div>\r\n      <Catalog2 />\r\n    </div>\r\n  );\r\n};\r\nexport default connect(null, { CHANGE_THEME })(MainPage);\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getCategory,\r\n  getTypes,\r\n  getGenre,\r\n} from \"../../service/thunk/books-thunk\";\r\nimport { withRouter } from \"react-router-dom\";\r\nconst concatFilter = (arr) => {\r\n  let result = \"\";\r\n  let keys = [];\r\n\r\n  arr.forEach((item) => {\r\n    for (let key in item) {\r\n      keys.push(key);\r\n    }\r\n  });\r\n  keys = [...new Set(keys)];\r\n  keys.forEach((key) => {\r\n    let concatvalue = \"\";\r\n    arr.forEach((item) => {\r\n      if (item[key] !== undefined) {\r\n        concatvalue += `${item[key]},`;\r\n      }\r\n    });\r\n    concatvalue = concatvalue.substring(0, concatvalue.length - 1);\r\n    result += `&${key}=${concatvalue}`;\r\n  });\r\n  return result;\r\n};\r\n\r\nconst FilterBlock = ({\r\n  light,\r\n  types,\r\n  genre,\r\n  category,\r\n  getCategory,\r\n  getTypes,\r\n  getGenre,\r\n  history,\r\n  params,\r\n}) => {\r\n  const filtersRef = useRef(null);\r\n  const searchRef = useRef(null);\r\n\r\n  const getinputValue = (name) => {\r\n    const decodeurl = decodeURIComponent(name);\r\n    if (name) {\r\n      const index = decodeurl.indexOf(\"&\");\r\n      if (index > -1) {\r\n        const res = decodeurl.slice(0, index).replace(\"title=\", \"\");\r\n        return res;\r\n      } else {\r\n        const res = decodeurl.replace(\"title=\", \"\");\r\n        return res;\r\n      }\r\n    }\r\n  };\r\n\r\n  let searchValue = getinputValue(params.name);\r\n\r\n  useEffect(() => {\r\n    getCategory();\r\n    getTypes();\r\n    getGenre();\r\n  }, [getCategory, getTypes, getGenre]);\r\n\r\n  const checkFilter = () => {\r\n    const dropdowns = filtersRef.current;\r\n    const dropdownChoices = dropdowns.querySelectorAll(\".filter-choice\");\r\n    let filters = [];\r\n    dropdownChoices.forEach((item) => {\r\n      const parentId = item.parentElement.id;\r\n      const children = item.childNodes;\r\n      if (children[0].checked) {\r\n        filters.push({ [parentId]: children[1].textContent });\r\n      }\r\n    });\r\n    const filtered = concatFilter(filters);\r\n    const search = searchRef.current.value;\r\n    const result =\r\n      `title=${search.length > 0 ? search : \"\"}` + filtered + \"&page=1\";\r\n    history.push(`/filter/${result}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"filters w-100\">\r\n      <h3 style={{ height: \"3rem\", margin: \"0\", textAlign: \"center\" }}>\r\n        Фильтры\r\n      </h3>\r\n      <div className=\"filter-block\">\r\n        <input\r\n          className={\"filter-input\" + (light ? \" input-white\" : \" input-black\")}\r\n          placeholder=\"Поиск\"\r\n          ref={searchRef}\r\n          defaultValue={searchValue}\r\n        />\r\n        <div className=\"dropwdowns\" ref={filtersRef}>\r\n          <div className=\"filter-dropdown\">\r\n            <button\r\n              className={\r\n                \"filter-dropdown-button m-0\" +\r\n                (light ? \" dropdown-white\" : \" dropdown-black\")\r\n              }\r\n            >\r\n              Типы\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                className=\"bi bi-caret-down dropdown-icon\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path d=\"M3.204 5h9.592L8 10.481 3.204 5zm-.753.659l4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z\" />\r\n              </svg>\r\n            </button>\r\n            <div\r\n              className={\r\n                \"dropdown-list first\" +\r\n                (light ? \" dropdown-white\" : \" dropdown-black\")\r\n              }\r\n              id=\"types\"\r\n            >\r\n              {types.map((item, index) => (\r\n                <div className=\"filter-choice\" key={index}>\r\n                  <input type=\"checkbox\" className=\"filter-choice-checkbox\" />\r\n                  <label>{item.title}</label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className=\"filter-dropdown\">\r\n            <button\r\n              className={\r\n                \"filter-dropdown-button m-0\" +\r\n                (light ? \" dropdown-white\" : \" dropdown-black\")\r\n              }\r\n            >\r\n              Жанры\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                className=\"bi bi-caret-down dropdown-icon\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path d=\"M3.204 5h9.592L8 10.481 3.204 5zm-.753.659l4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z\" />\r\n              </svg>\r\n            </button>\r\n            <div\r\n              className={\r\n                \"dropdown-list first\" +\r\n                (light ? \" dropdown-white\" : \" dropdown-black\")\r\n              }\r\n              id=\"genres\"\r\n            >\r\n              {genre.map((item, index) => (\r\n                <div className=\"filter-choice\" key={index}>\r\n                  <input type=\"checkbox\" className=\"filter-choice-checkbox\" />\r\n                  <label>{item.title}</label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className=\"filter-dropdown\">\r\n            <button\r\n              className={\r\n                \"filter-dropdown-button m-0\" +\r\n                (light ? \" dropdown-white\" : \" dropdown-black\")\r\n              }\r\n            >\r\n              Категории\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                className=\"bi bi-caret-down dropdown-icon\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path d=\"M3.204 5h9.592L8 10.481 3.204 5zm-.753.659l4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z\" />\r\n              </svg>\r\n            </button>\r\n            <div\r\n              className={\r\n                \"dropdown-list\" +\r\n                (light ? \" dropdown-white\" : \" dropdown-black\")\r\n              }\r\n              id=\"category\"\r\n            >\r\n              {category.map((item, index) => (\r\n                <div className=\"filter-choice\" key={index}>\r\n                  <input type=\"checkbox\" className=\"filter-choice-checkbox\" />\r\n                  <label>{item.title}</label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        <button\r\n          onClick={() => checkFilter()}\r\n          className={\"btn mt-3\" + (light ? \" btn-secondary\" : \" btn-dark\")}\r\n          style={{\r\n            paddingLeft: \"2rem\",\r\n            paddingRight: \"2rem\",\r\n            fontSize: \"18px\",\r\n          }}\r\n        >\r\n          Найти\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n    types: state.bookReducer.types,\r\n    genre: state.bookReducer.genre,\r\n    category: state.bookReducer.category,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  getCategory,\r\n  getTypes,\r\n  getGenre,\r\n})(withRouter(FilterBlock));\r\n","import React, { useEffect } from \"react\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport BookItem from \"../catalog/book-item\";\r\nimport { getBooks } from \"../../service/thunk/books-thunk\";\r\n\r\nconst BookList = ({ books, params, getBooks, light, booksLoading, count }) => {\r\n  useEffect(() => {\r\n    const decodeurl = decodeURIComponent(params.name);\r\n    getBooks(\"?\" + decodeurl);\r\n  }, [params, getBooks]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"row book-list-filter\">\r\n        {books.map((item, index) => (\r\n          <div className=\"col-lg-2 col-md-3 col-4 p-0\" key={index}>\r\n            <BookItem item={item} margin={0} light={light} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    books: state.bookReducer.books,\r\n    count: state.bookReducer.count,\r\n    booksLoading: state.bookReducer.booksLoading,\r\n  };\r\n};\r\nexport default connect(mapStateToProps, { getBooks })(withRouter(BookList));\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport \"./style.css\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst PreviousLabel = ({ light }) => {\r\n  return (\r\n    <span\r\n      className={\r\n        \"pagination-btn\" + (light ? \" light-pagination\" : \" dark-pagination\")\r\n      }\r\n    >\r\n      ‹\r\n    </span>\r\n  );\r\n};\r\nconst NextLabel = ({ light }) => {\r\n  return (\r\n    <span\r\n      className={\r\n        \"pagination-btn\" + (light ? \" light-pagination\" : \" dark-pagination\")\r\n      }\r\n    >\r\n      ›\r\n    </span>\r\n  );\r\n};\r\n\r\nconst Pagination = ({ numPage, light, params, history }) => {\r\n  const onPageChange = (current) => {\r\n    const decodeurl = decodeURIComponent(params);\r\n    const currentPage = current.selected + 1;\r\n    if (params === undefined) {\r\n      history.push(`/filter/title=&page=${currentPage}`);\r\n    } else {\r\n      let match = decodeurl.match(/&page=(\\d{0,})/gm);\r\n      if (match) {\r\n        let newParams = decodeurl.replace(match[0], `&page=${currentPage}`);\r\n        history.push(`/filter/${newParams}`);\r\n      } else {\r\n        history.push(`/filter/${decodeurl}&page=${currentPage}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const [forsePage, setforse] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (params !== undefined) {\r\n      let match = params.match(/&page=(\\d{0,})/gm);\r\n      if (match) {\r\n        const num = match[0].replace(\"&page=\", \"\");\r\n        setforse(parseInt(num) - 1);\r\n      }\r\n    }\r\n  }, [params]);\r\n  return (\r\n    <ReactPaginate\r\n      pageCount={numPage}\r\n      pageRangeDisplayed={4}\r\n      marginPagesDisplayed={1}\r\n      containerClassName=\"pagination\"\r\n      pageClassName={\r\n        \"pagination-btn\" + (light ? \" light-pagination\" : \" dark-pagination\")\r\n      }\r\n      breakClassName={\r\n        \"pagination-btn\" + (light ? \" light-pagination\" : \" dark-pagination\")\r\n      }\r\n      activeClassName={light ? \" light-active\" : \" dark-active\"}\r\n      activeLinkClassName={\"active-link\"}\r\n      previousLabel={<PreviousLabel light={light} />}\r\n      nextLabel={<NextLabel light={light} />}\r\n      previousClassName=\"previous-btn\"\r\n      nextClassName=\"next-btn\"\r\n      onPageChange={onPageChange}\r\n      initialPage={0}\r\n      forcePage={forsePage}\r\n    />\r\n  );\r\n};\r\n\r\nexport default withRouter(Pagination);\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport FilterBlock from \"./filter-block\";\r\nimport BookList from \"./books-list\";\r\nimport { getBooks } from \"../../service/thunk/books-thunk\";\r\nimport Pagination from \"./paginations\";\r\n\r\nconst FilterMainPage = ({ light, params, count }) => {\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <div className={\"filter-wrapper\" + (light ? \" white-bg\" : \" black-bg\")}>\r\n        <div className=\"custom-container\">\r\n          <FilterBlock params={params} />\r\n          <BookList params={params} light={light} />\r\n          <Pagination\r\n            params={params.name}\r\n            numPage={count}\r\n            p={0}\r\n            light={light}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n    count: state.bookReducer.count,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getBooks })(FilterMainPage);\r\n","const SET_AUTH = () => {\r\n  return {\r\n    type: \"SET_AUTH\",\r\n  };\r\n};\r\n\r\nconst DEL_AUTH = () => {\r\n  localStorage.setItem(\"isAuth\", \"false\");\r\n  return { type: \"DEL_AUTh\" };\r\n};\r\n\r\nconst AUTH_ERROR = () => {\r\n  return {\r\n    type: \"AUTH_ERROR\",\r\n  };\r\n};\r\n\r\nconst GET_MY_USER = (data) => {\r\n  return {\r\n    type: \"GET_MY_USER\",\r\n    data,\r\n  };\r\n};\r\n\r\nconst GET_USER = (data) => {\r\n  return {\r\n    type: \"GET_USER_BY_ID\",\r\n    data,\r\n  };\r\n};\r\nexport { SET_AUTH, DEL_AUTH, AUTH_ERROR, GET_MY_USER, GET_USER };\r\n","import axios from \"axios\";\r\n\r\nconst base_url = \"https://prod-reading.herokuapp.com/\";\r\nfunction getCookie(name) {\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== \"\") {\r\n    const cookies = document.cookie.split(\";\");\r\n    for (let i = 0; i < cookies.length; i++) {\r\n      const cookie = cookies[i].trim();\r\n      // Does this cookie string begin with the name we want?\r\n      if (cookie.substring(0, name.length + 1) === name + \"=\") {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nclass Profile {\r\n  async createUser(username, password, re_password, gender, first_name) {\r\n    const res = await axios.post(\r\n      base_url + \"auth/users/\",\r\n      {\r\n        username,\r\n        password,\r\n        re_password,\r\n        gender,\r\n        first_name,\r\n      },\r\n      {\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      }\r\n    );\r\n    if (res.status === 201) {\r\n      return res.data;\r\n    } else {\r\n      return res.data;\r\n    }\r\n  }\r\n  async loginUser(username, password) {\r\n    const res = await axios.post(\r\n      base_url + \"auth/jwt/create/\",\r\n      {\r\n        username,\r\n        password,\r\n      },\r\n      {\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      }\r\n    );\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      throw new Error(\"bad request\");\r\n    }\r\n  }\r\n  async getMyUser(access) {\r\n    const res = await axios.get(base_url + \"api/user/my_profile\", {\r\n      \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n      headers: {\r\n        Authorization: \"JWT \" + access,\r\n      },\r\n    });\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      throw new Error(\"bad request\");\r\n    }\r\n  }\r\n  async changeMyProfile(username, first_name, gender, access) {\r\n    const res = await axios.put(\r\n      base_url + \"api/user/my_profile\",\r\n      { username, first_name, gender },\r\n      {\r\n        \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n        headers: {\r\n          Authorization: \"JWT \" + access,\r\n        },\r\n      }\r\n    );\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      throw new Error(\"bad request\");\r\n    }\r\n  }\r\n  async setimage(image, access) {\r\n    const res = await axios.post(base_url + \"api/user/my_profile\", image, {\r\n      headers: {\r\n        Authorization: \"JWT \" + access,\r\n        \"content-type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      throw new Error(\"bad request\");\r\n    }\r\n  }\r\n  async getUserById(id) {\r\n    const res = await axios.get(base_url + `api/user/${id}`);\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      throw new Error(\"bad request\");\r\n    }\r\n  }\r\n}\r\n\r\nexport default Profile;\r\n","import Profile from \"../api/profile\";\r\nimport { GET_MY_USER, GET_USER } from \"../actions/profile-action\";\r\n\r\nconst api = new Profile();\r\n\r\nconst getMyUser = (access) => {\r\n  return (dispatch) => {\r\n    api.getMyUser(access).then((data) => {\r\n      dispatch(GET_MY_USER(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getUserById = (id) => {\r\n  return (dispatch) => {\r\n    api.getUserById(id).then((data) => {\r\n      dispatch(GET_USER(data));\r\n    });\r\n  };\r\n};\r\n\r\nexport { getMyUser, getUserById };\r\n","const GET_CHAPTERS = (data) => {\r\n  return { type: \"GET_CHAPTERS\", data: data };\r\n};\r\n\r\nconst GET_DETAIL_BOOK = (data) => {\r\n  console.log(data);\r\n  return { type: \"GET_DETAIL_BOOK\", data: data };\r\n};\r\n\r\nconst FETCHING_CHAPTER = () => {\r\n  return {\r\n    type: \"FETCHING_CHAPTER\",\r\n  };\r\n};\r\n\r\nconst FETCHING_BOOK = () => {\r\n  return {\r\n    type: \"FETCHING_BOOK\",\r\n  };\r\n};\r\nconst FETCHING_PAGES = () => {\r\n  return {\r\n    type: \"FETCHING_PAGES\",\r\n  };\r\n};\r\n\r\nconst GET_PAGES = (data) => {\r\n  return { type: \"GET_PAGES\", data: data };\r\n};\r\n\r\nconst GET_REVIEWS = (data) => {\r\n  return { type: \"GET_REVIEWS\", data: data };\r\n};\r\n\r\nexport {\r\n  GET_CHAPTERS,\r\n  GET_DETAIL_BOOK,\r\n  FETCHING_CHAPTER,\r\n  FETCHING_BOOK,\r\n  FETCHING_PAGES,\r\n  GET_PAGES,\r\n  GET_REVIEWS,\r\n};\r\n","import {\r\n  GET_CHAPTERS,\r\n  GET_DETAIL_BOOK,\r\n  FETCHING_CHAPTER,\r\n  FETCHING_BOOK,\r\n  FETCHING_PAGES,\r\n  GET_PAGES,\r\n  GET_REVIEWS,\r\n} from \"../actions/book-action\";\r\nimport BooksApi from \"../api/books-api\";\r\n\r\nconst booksApi = new BooksApi();\r\n\r\nconst getChapters = (id, page) => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_CHAPTER());\r\n    booksApi.getChapterByBook(id, page).then((data) => {\r\n      dispatch(GET_CHAPTERS(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getDetailBook = (id, access) => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_BOOK());\r\n    booksApi.getDetailBook(id, access).then((data) => {\r\n      dispatch(GET_DETAIL_BOOK(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getPages = (id) => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_PAGES());\r\n    booksApi.getPagesByChapter(id).then((data) => {\r\n      dispatch(GET_PAGES(data));\r\n    });\r\n  };\r\n};\r\n\r\nconst getReviews = (id) => {\r\n  return (dispatch) => {\r\n    dispatch(FETCHING_PAGES());\r\n    booksApi.getReviews(id).then((data) => {\r\n      dispatch(GET_REVIEWS(data));\r\n    });\r\n  };\r\n};\r\n\r\nexport { getChapters, getDetailBook, getPages, getReviews };\r\n","import React, { useState } from \"react\";\r\nimport { Redirect, withRouter } from \"react-router-dom\";\r\nimport BooksApi from \"../../service/api/books-api\";\r\n\r\nconst RatingPopUp = ({\r\n  isOpen,\r\n  setOpen,\r\n  isAuth,\r\n  book_id,\r\n  user_id,\r\n  history,\r\n}) => {\r\n  const [chosenStar, setStar] = useState(0);\r\n  const [text, setText] = useState(\"\");\r\n\r\n  const setComment = (text) => {\r\n    let finishedText = text;\r\n    if (text.match(/(\\r\\n|\\n|\\r)/gm) !== null) {\r\n      finishedText = text.replace(/(\\r\\n|\\n|\\r)/gm, \"<br>\");\r\n    }\r\n    if (finishedText.match(/\\s{2,}/g) !== null) {\r\n      finishedText = finishedText.replace(/\\s{2,}/g, \" \");\r\n    }\r\n    setText(finishedText);\r\n  };\r\n\r\n  const publish = () => {\r\n    let access = localStorage.getItem(\"access\");\r\n    if (access) {\r\n      access = access.slice(1, -1);\r\n      const api = new BooksApi();\r\n      api.setReview(book_id, user_id, chosenStar, text, access);\r\n      setOpen(false);\r\n    } else {\r\n      localStorage.setItem(\"isAuth\", \"false\");\r\n      localStorage.removeItem(\"access\");\r\n      localStorage.removeItem(\"refresh\");\r\n      window.location.reload(false);\r\n      history.push(\"/login/\");\r\n    }\r\n  };\r\n\r\n  if (isOpen) {\r\n    if (isAuth || JSON.parse(localStorage.getItem(\"isAuth\"))) {\r\n      return (\r\n        <React.Fragment>\r\n          <svg style={{ display: \"none\" }}>\r\n            <symbol id=\"star2\" viewBox=\"0 -10 511.98685 511\">\r\n              <g>\r\n                <path d=\"m510.652344 185.902344c-3.351563-10.367188-12.546875-17.730469-23.425782-18.710938l-147.773437-13.417968-58.433594-136.769532c-4.308593-10.023437-14.121093-16.511718-25.023437-16.511718s-20.714844 6.488281-25.023438 16.535156l-58.433594 136.746094-147.796874 13.417968c-10.859376 1.003906-20.03125 8.34375-23.402344 18.710938-3.371094 10.367187-.257813 21.738281 7.957031 28.90625l111.699219 97.960937-32.9375 145.089844c-2.410156 10.667969 1.730468 21.695313 10.582031 28.09375 4.757813 3.4375 10.324219 5.1875 15.9375 5.1875 4.839844 0 9.640625-1.304687 13.949219-3.882813l127.46875-76.183593 127.421875 76.183593c9.324219 5.609376 21.078125 5.097657 29.910156-1.304687 8.855469-6.417969 12.992187-17.449219 10.582031-28.09375l-32.9375-145.089844 111.699219-97.941406c8.214844-7.1875 11.351563-18.539063 7.980469-28.925781zm0 0\" />\r\n              </g>\r\n            </symbol>\r\n          </svg>\r\n          <div className=\"popup-background\">\r\n            <div className=\"popup-form\">\r\n              <span className=\"close\" onClick={() => setOpen(false)}>\r\n                X\r\n              </span>\r\n              <div className=\"set-star\">\r\n                {[1, 2, 3, 4, 5].map((item) => (\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                    }}\r\n                    key={item}\r\n                  >\r\n                    <svg\r\n                      className={\r\n                        \"icon-detail star\" +\r\n                        (chosenStar === item ? \" chosenStar\" : \"\")\r\n                      }\r\n                      onClick={() => setStar(item)}\r\n                    >\r\n                      <use xlinkHref=\"#star2\"></use>\r\n                    </svg>\r\n                    <span\r\n                      className=\"star-value\"\r\n                      style={{ color: \"white\", paddingRight: \"10px\" }}\r\n                    >\r\n                      {item}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"set-comment-value\">\r\n                <div\r\n                  style={{\r\n                    color: \"white\",\r\n                    marginBottom: \"10px\",\r\n                    marginTop: \"10px\",\r\n                  }}\r\n                >\r\n                  <h6>Оставьте свой комментарий:</h6>\r\n                </div>\r\n                <textarea\r\n                  rows=\"5\"\r\n                  cols=\"50\"\r\n                  style={{\r\n                    background: \"black\",\r\n                    outline: \"none\",\r\n                    border: \"0\",\r\n                    color: \"white\",\r\n                  }}\r\n                  className=\"form-control\"\r\n                  onChange={(e) => setComment(e.target.value)}\r\n                ></textarea>\r\n                <button\r\n                  className=\"btn btn-warning mt-2\"\r\n                  onClick={() => publish()}\r\n                >\r\n                  Опубликовать\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      return <Redirect to=\"/login/\" />;\r\n    }\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default withRouter(RatingPopUp);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst ChapterItem = ({ light, item, history }) => {\r\n  return (\r\n    <div\r\n      className=\"chapter-item\"\r\n      style={{ background: light ? \"#fafafa\" : \"#121212\" }}\r\n      onClick={() => history.push(`/detail/pages/${item.id}`)}\r\n    >\r\n      <div className=\"chapter-info\">\r\n        <h6>{item.title} </h6>\r\n        <span>{item.created_date}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(withRouter(ChapterItem));\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport \"./style.css\";\r\n\r\nconst ReviewItem = ({ item, light, history }) => {\r\n  const [starPrecent, setPersent] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const value = item.star;\r\n    const persent = (parseInt(value) / 5) * 100;\r\n    setPersent(persent);\r\n  }, [item]);\r\n  return (\r\n    <div\r\n      className=\"review-item\"\r\n      style={{ background: light ? \"#fafafa\" : \"#121212\" }}\r\n    >\r\n      <div className=\"review-img-wrapper\">\r\n        <img src={item.user.image} className=\"review-img\" alt=\"poster\" />\r\n      </div>\r\n      <div className=\"review-text\">\r\n        <h6\r\n          onClick={() => history.push(\"/profile/\" + item.user.id)}\r\n          className=\"comment-title\"\r\n          style={{ display: \"inline\", cursor: \"pointer\" }}\r\n        >\r\n          {item.user.username}\r\n        </h6>\r\n        <div className=\"rating\">\r\n          <div className=\"rating__body\">\r\n            <div\r\n              className=\"rating__active\"\r\n              style={{ width: `${starPrecent}%` }}\r\n            ></div>\r\n            <div className=\"rating__items\">\r\n              <input type=\"radio\" className=\"rating__item\" value={1} />\r\n              <input type=\"radio\" className=\"rating__item\" value={2} />\r\n              <input type=\"radio\" className=\"rating__item\" value={3} />\r\n              <input type=\"radio\" className=\"rating__item\" value={4} />\r\n              <input type=\"radio\" className=\"rating__item\" value={5} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p dangerouslySetInnerHTML={{ __html: item.text }} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(ReviewItem);\r\n","import React from \"react\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst PreviousLabel = ({ light }) => {\r\n  return (\r\n    <span\r\n      className={\r\n        \"pagination-btn\" + (light ? \" light-pagination\" : \" dark-pagination\")\r\n      }\r\n    >\r\n      ‹\r\n    </span>\r\n  );\r\n};\r\nconst NextLabel = ({ light }) => {\r\n  return (\r\n    <span\r\n      className={\r\n        \"pagination-btn\" + (light ? \" light-pagination\" : \" dark-pagination\")\r\n      }\r\n    >\r\n      ›\r\n    </span>\r\n  );\r\n};\r\n\r\nconst Pagination = ({ numPage, light, params, history }) => {\r\n  const onPageChange = (current) => {\r\n    const decodeurl = decodeURIComponent(params);\r\n    const currentPage = current.selected + 1;\r\n    let match = decodeurl.match(/&page=(\\d{0,})/gm);\r\n    if (match) {\r\n      let newParams = decodeurl.replace(match[0], `&page=${currentPage}`);\r\n      history.push(`/detail/${newParams}`);\r\n    } else {\r\n      history.push(`/detail/${params}&page=${currentPage}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ReactPaginate\r\n      pageCount={numPage}\r\n      pageRangeDisplayed={4}\r\n      marginPagesDisplayed={1}\r\n      containerClassName=\"pagination\"\r\n      pageClassName={\r\n        \"pagination-btn\" + (light ? \" light-pagination\" : \" dark-pagination\")\r\n      }\r\n      breakClassName={\r\n        \"pagination-btn\" + (light ? \" light-pagination\" : \" dark-pagination\")\r\n      }\r\n      activeClassName={light ? \" light-active\" : \" dark-active\"}\r\n      activeLinkClassName={\"active-link\"}\r\n      previousLabel={<PreviousLabel light={light} />}\r\n      nextLabel={<NextLabel light={light} />}\r\n      previousClassName=\"previous-btn\"\r\n      nextClassName=\"next-btn\"\r\n      onPageChange={onPageChange}\r\n      initialPage={0}\r\n      forcePage={0}\r\n    />\r\n  );\r\n};\r\n\r\nexport default withRouter(Pagination);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport {\r\n  getDetailBook,\r\n  getChapters,\r\n  getReviews,\r\n} from \"../../service/thunk/detail-thunk\";\r\nimport { GET_DETAIL_BOOK } from \"../../service/actions/book-action\";\r\nimport RatingPopUp from \"./rating-popup\";\r\nimport BooksApi from \"../../service/api/books-api\";\r\nimport ChapterItem from \"./chapter-item\";\r\nimport ReviewItem from \"./review-item\";\r\nimport Pagination from \"./pagination\";\r\nimport \"./style.css\";\r\n\r\nconst DetailPage = ({\r\n  light,\r\n  params,\r\n  history,\r\n  getDetailBook,\r\n  getChapters,\r\n  title,\r\n  description,\r\n  views,\r\n  created_date,\r\n  status,\r\n  category,\r\n  genre,\r\n  types,\r\n  poster,\r\n  is_liked,\r\n  average_rating,\r\n  chapters,\r\n  page_count,\r\n  chapterloading,\r\n  bookLoading,\r\n  isAuth,\r\n  id,\r\n  GET_DETAIL_BOOK,\r\n  getReviews,\r\n  reviews,\r\n  myuser,\r\n}) => {\r\n  const [subUrl, setSub] = useState(1);\r\n  const [bookId, setBookId] = useState(0);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const decodeurl = decodeURIComponent(params.id);\r\n    const access = JSON.parse(localStorage.getItem(\"access\"));\r\n    const match = decodeurl.match(/id=(\\d{0,})/gm);\r\n    const id = match[0].replace(\"id=\", \"\");\r\n    getDetailBook(id, access);\r\n    getChapters(id);\r\n    getReviews(id);\r\n    setBookId(id);\r\n  }, [getDetailBook, getChapters, getReviews]); // getting book data\r\n\r\n  useEffect(() => {\r\n    const decodeurl = decodeURIComponent(params.id);\r\n    const page = decodeurl.match(/&page=(\\d{0,})/gm);\r\n    if (page) {\r\n      const num = page[0].replace(\"&page=\", \"\");\r\n      getChapters(bookId, num);\r\n    }\r\n  }, [params, bookId, getChapters]); //set pagination settings\r\n\r\n  const addLike = () => {\r\n    if (isAuth || JSON.parse(localStorage.getItem(\"isAuth\"))) {\r\n      const api = new BooksApi();\r\n      const access = localStorage.getItem(\"access\").slice(1, -1);\r\n      api.setLike(id, access).then((data) => {\r\n        GET_DETAIL_BOOK(data);\r\n      });\r\n    } else {\r\n      history.push(\"/login/\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className={\"detail-wrapper \" + (light ? \"light-bg\" : \"black-bg\")}>\r\n        <svg style={{ display: \"none\" }}>\r\n          <symbol id=\"star\" viewBox=\"0 -10 511.98685 511\">\r\n            <g>\r\n              <path\r\n                d=\"m510.652344 185.902344c-3.351563-10.367188-12.546875-17.730469-23.425782-18.710938l-147.773437-13.417968-58.433594-136.769532c-4.308593-10.023437-14.121093-16.511718-25.023437-16.511718s-20.714844 6.488281-25.023438 16.535156l-58.433594 136.746094-147.796874 13.417968c-10.859376 1.003906-20.03125 8.34375-23.402344 18.710938-3.371094 10.367187-.257813 21.738281 7.957031 28.90625l111.699219 97.960937-32.9375 145.089844c-2.410156 10.667969 1.730468 21.695313 10.582031 28.09375 4.757813 3.4375 10.324219 5.1875 15.9375 5.1875 4.839844 0 9.640625-1.304687 13.949219-3.882813l127.46875-76.183593 127.421875 76.183593c9.324219 5.609376 21.078125 5.097657 29.910156-1.304687 8.855469-6.417969 12.992187-17.449219 10.582031-28.09375l-32.9375-145.089844 111.699219-97.941406c8.214844-7.1875 11.351563-18.539063 7.980469-28.925781zm0 0\"\r\n                fill=\"#ffc107\"\r\n              />\r\n            </g>\r\n          </symbol>\r\n          <symbol id=\"heart\" viewBox=\"0 0 512 512\">\r\n            <g>\r\n              <path d=\"m246.122 477.289c-144.417-126.367-246.122-193.304-246.122-299.774 0-80.513 57.4-146.515 136-146.515 54.544 0 95.017 33.497 120 81.015 24.981-47.515 65.454-81.015 120-81.015 78.609 0 136 66.015 136 146.515 0 106.457-101.572 173.291-246.122 299.773-5.657 4.949-14.1 4.949-19.756.001z\" />\r\n            </g>\r\n          </symbol>\r\n          <symbol id=\"eye\" viewBox=\"0 0 511.999 511.999\">\r\n            <g>\r\n              <g>\r\n                <g>\r\n                  <path\r\n                    d=\"M508.745,246.041c-4.574-6.257-113.557-153.206-252.748-153.206S7.818,239.784,3.249,246.035\r\n\t\t\tc-4.332,5.936-4.332,13.987,0,19.923c4.569,6.257,113.557,153.206,252.748,153.206s248.174-146.95,252.748-153.201\r\n\t\t\tC513.083,260.028,513.083,251.971,508.745,246.041z M255.997,385.406c-102.529,0-191.33-97.533-217.617-129.418\r\n\t\t\tc26.253-31.913,114.868-129.395,217.617-129.395c102.524,0,191.319,97.516,217.617,129.418\r\n\t\t\tC447.361,287.923,358.746,385.406,255.997,385.406z\"\r\n                  />\r\n                </g>\r\n              </g>\r\n              <g>\r\n                <g>\r\n                  <path\r\n                    d=\"M255.997,154.725c-55.842,0-101.275,45.433-101.275,101.275s45.433,101.275,101.275,101.275\r\n\t\t\ts101.275-45.433,101.275-101.275S311.839,154.725,255.997,154.725z M255.997,323.516c-37.23,0-67.516-30.287-67.516-67.516\r\n\t\t\ts30.287-67.516,67.516-67.516s67.516,30.287,67.516,67.516S293.227,323.516,255.997,323.516z\"\r\n                  />\r\n                </g>\r\n              </g>\r\n            </g>\r\n          </symbol>\r\n        </svg>\r\n        <div className=\"detail-container\">\r\n          {bookLoading ? (\r\n            <div\r\n              style={{\r\n                width: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                marginTop: \"5vh\",\r\n              }}\r\n            >\r\n              <div className=\"spinner-border\" role=\"status\">\r\n                <span className=\"sr-only\"></span>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div\r\n              className={\r\n                \"detail-block row \" +\r\n                (light ? \"detail-block-lt\" : \"detail-block-bl\")\r\n              }\r\n            >\r\n              <div className=\"detail-img-block col-12 col-sm-3\">\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <img src={poster} className=\"detail-img\" alt=\"poster\" />\r\n                </div>\r\n                <div className=\"read\">\r\n                  <button\r\n                    className=\"btn btn-warning btn-block\"\r\n                    onClick={() => setSub(2)}\r\n                  >\r\n                    Читать\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div\r\n                className=\"detail-info-block col-12 col-sm-9\"\r\n                style={light ? { color: \"black\" } : { color: \"white\" }}\r\n              >\r\n                <div className=\"detail-header\">\r\n                  <h2 style={{ overflowX: \"auto\", overflowY: \"hidden\" }}>\r\n                    {title} ({status})\r\n                  </h2>\r\n                  <div className=\"header-display\">\r\n                    <div\r\n                      style={{\r\n                        marginRight: \"5%\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                      }}\r\n                    >\r\n                      <svg\r\n                        className=\"icon-detail\"\r\n                        onClick={() => setOpen(true)}\r\n                      >\r\n                        <use xlinkHref=\"#star\"></use>\r\n                      </svg>\r\n                      <span className=\"star-value\">{average_rating}</span>\r\n                    </div>\r\n                    <div\r\n                      style={{\r\n                        marginRight: \"5%\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                      }}\r\n                    >\r\n                      <svg\r\n                        className={\r\n                          \"icon-detail heart\" + (is_liked ? \" liked\" : \"\")\r\n                        }\r\n                        onClick={() => addLike()}\r\n                      >\r\n                        <use xlinkHref=\"#heart\"></use>\r\n                      </svg>\r\n                    </div>\r\n                    <div\r\n                      style={{\r\n                        marginRight: \"5%\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                      }}\r\n                    >\r\n                      <svg className=\"icon-detail eye\">\r\n                        <use xlinkHref=\"#eye\"></use>\r\n                      </svg>\r\n                      <span className=\"star-value\">{views}</span>\r\n                    </div>\r\n                    <div\r\n                      style={{\r\n                        marginRight: \"5%\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        fontSize: \"18px\",\r\n                      }}\r\n                    >\r\n                      <span className=\"star-value\">{types}</span>\r\n                    </div>\r\n                    <div\r\n                      style={{\r\n                        marginRight: \"5%\",\r\n                        display: \"flex\",\r\n                        fontSize: \"18px\",\r\n                        alignItems: \"center\",\r\n                      }}\r\n                    >\r\n                      <span className=\"star-value\">{created_date}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"detail-main\">\r\n                  <div className=\"detail-nav\">\r\n                    <span\r\n                      className={\r\n                        \"nav-btn \" + (subUrl === 1 ? \"active-btn\" : \"\")\r\n                      }\r\n                      onClick={() => {\r\n                        setSub(1);\r\n                      }}\r\n                    >\r\n                      Описание\r\n                    </span>\r\n                    <span\r\n                      className={\r\n                        \"nav-btn \" + (subUrl === 2 ? \"active-btn\" : \"\")\r\n                      }\r\n                      onClick={() => {\r\n                        setSub(2);\r\n                      }}\r\n                    >\r\n                      Главы\r\n                    </span>\r\n                    <span\r\n                      className={\r\n                        \"nav-btn \" + (subUrl === 3 ? \"active-btn\" : \"\")\r\n                      }\r\n                      onClick={() => {\r\n                        setSub(3);\r\n                      }}\r\n                    >\r\n                      Отзывы\r\n                    </span>\r\n                  </div>\r\n\r\n                  {subUrl === 1 && (\r\n                    <div className=\"detail-description\">\r\n                      <div className=\"detail-genres\">\r\n                        <span\r\n                          style={{\r\n                            display: \"block\",\r\n                            overflowX: \"scroll\",\r\n                          }}\r\n                        >\r\n                          Категория:{\" \"}\r\n                          {category.map((item) => (\r\n                            <span key={item}>{item}, </span>\r\n                          ))}\r\n                        </span>\r\n                        <span\r\n                          style={{\r\n                            display: \"block\",\r\n                          }}\r\n                        >\r\n                          Жанр:{\" \"}\r\n                          {genre.map((item) => (\r\n                            <span key={item}>{item}, </span>\r\n                          ))}\r\n                        </span>\r\n                      </div>\r\n                      <h6>Краткое описание: </h6>\r\n                      <div className=\"description\">{description}</div>\r\n                    </div>\r\n                  )}\r\n                  {subUrl === 2 && (\r\n                    <div className=\"chapter-block\">\r\n                      {chapterloading ? (\r\n                        <div\r\n                          style={{\r\n                            width: \"100%\",\r\n                            display: \"flex\",\r\n                            justifyContent: \"center\",\r\n                            marginTop: \"5vh\",\r\n                          }}\r\n                        >\r\n                          <div className=\"spinner-border\" role=\"status\">\r\n                            <span className=\"sr-only\"></span>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        chapters.map((item) => (\r\n                          <ChapterItem item={item} key={item.id} />\r\n                        ))\r\n                      )}\r\n                      <Pagination\r\n                        light={light}\r\n                        params={params.id}\r\n                        numPage={page_count}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  {subUrl === 3 && (\r\n                    <div\r\n                      style={{\r\n                        marginLeft: \"5px\",\r\n                        paddingTop: \"10px\",\r\n                      }}\r\n                    >\r\n                      {reviews\r\n                        ? reviews.map((item) => (\r\n                            <ReviewItem item={item} light={light} key={item} />\r\n                          ))\r\n                        : null}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <RatingPopUp\r\n        isOpen={open}\r\n        setOpen={setOpen}\r\n        isAuth={isAuth}\r\n        book_id={bookId}\r\n        user_id={myuser.id}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n};\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n    title: state.BookDetailReducer.title,\r\n    description: state.BookDetailReducer.description,\r\n    views: state.BookDetailReducer.views,\r\n    created_date: state.BookDetailReducer.created_date,\r\n    status: state.BookDetailReducer.status,\r\n    category: state.BookDetailReducer.category,\r\n    genre: state.BookDetailReducer.genre,\r\n    types: state.BookDetailReducer.types,\r\n    poster: state.BookDetailReducer.poster,\r\n    is_liked: state.BookDetailReducer.is_liked,\r\n    average_rating: state.BookDetailReducer.average_rating,\r\n    chapters: state.BookDetailReducer.chapters,\r\n    page_count: state.BookDetailReducer.page_count,\r\n    chapterloading: state.BookDetailReducer.Chapterloading,\r\n    bookLoading: state.BookDetailReducer.bookLoading,\r\n    reviews: state.BookDetailReducer.reviews,\r\n    id: state.BookDetailReducer.id,\r\n    isAuth: state.ProfileReducer.isAuth,\r\n    myuser: state.ProfileReducer.myuser,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  getDetailBook,\r\n  getChapters,\r\n  GET_DETAIL_BOOK,\r\n  getReviews,\r\n})(withRouter(DetailPage));\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getPages } from \"../../service/thunk/detail-thunk\";\r\n\r\nconst PagesBlock = ({ params, pages, getPages, info, pages_loading }) => {\r\n  useEffect(() => {\r\n    const decodeurl = decodeURIComponent(params.id);\r\n    getPages(decodeurl);\r\n  }, [params, getPages]);\r\n\r\n  return (\r\n    <div className=\"pages-wrapper\">\r\n      <div className=\"custom-container\">\r\n        <div style={{ display: \"grid\", justifyContent: \"center\" }}>\r\n          {pages_loading ? (\r\n            <div\r\n              style={{\r\n                width: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                marginTop: \"5vh\",\r\n              }}\r\n            >\r\n              <div className=\"spinner-border\" role=\"status\">\r\n                <span className=\"sr-only\"></span>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <h3 style={{ color: \"white\" }}>{info.title}</h3>\r\n              <span>Дата выхода: {info.created_date}</span>\r\n              <div style={{ display: \"grid\" }}>\r\n                {pages.length > 0\r\n                  ? pages[0].map((item, index) => (\r\n                      <img\r\n                        src={item.picture}\r\n                        key={index}\r\n                        style={{ maxWidth: \"100%\" }}\r\n                        alt=\"page\"\r\n                      />\r\n                    ))\r\n                  : null}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    pages: state.BookDetailReducer.pages,\r\n    info: state.BookDetailReducer.pages_info,\r\n    pages_loading: state.BookDetailReducer.pages_loading,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getPages })(PagesBlock);\r\n","export const required = (value) => {\r\n  if (value) return undefined;\r\n  return \"Field is required\";\r\n};\r\n\r\nexport const passwordsMatch = (value, allValues) => {\r\n  console.log(allValues);\r\n  if (value !== allValues.password) {\r\n    return \"Passwords don't match\";\r\n  }\r\n  return undefined;\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nlet CustomField = ({\r\n  input,\r\n  type,\r\n  placeholder,\r\n  label,\r\n  meta: { touched, error, warning },\r\n  light,\r\n}) => {\r\n  return (\r\n    <div style={{ marginBottom: \"15px\" }}>\r\n      <label className=\"label\">{label}:</label>\r\n      <input\r\n        {...input}\r\n        placeholder={placeholder}\r\n        type={type}\r\n        className={\"form-control \" + (light ? \"light-input\" : \"black-input\")}\r\n      />\r\n      {touched &&\r\n        ((error && <span className=\"text-danger\">{error}</span>) ||\r\n          (warning && <span className=\"text-danger\">{warning}</span>))}\r\n    </div>\r\n  );\r\n};\r\n\r\nlet GenderInput = ({\r\n  name,\r\n  label,\r\n  meta: { touched, error, warning },\r\n  light,\r\n}) => {\r\n  return (\r\n    <div style={{ marginBottom: \"15px\" }}>\r\n      <label className=\"label\">{label}:</label>\r\n      <select\r\n        name={name}\r\n        className={\"form-control \" + (light ? \"light-input\" : \"black-input\")}\r\n        style={light ? { color: \"aqua\" } : { color: \"red\" }}\r\n      >\r\n        <option></option>\r\n        <option value=\"Male\">Мужской</option>\r\n        <option value=\"Female\">Женский</option>\r\n      </select>\r\n      {touched &&\r\n        ((error && <span className=\"text-danger\">{error}</span>) ||\r\n          (warning && <span className=\"text-danger\">{warning}</span>))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n  };\r\n};\r\n\r\nCustomField = connect(mapStateToProps)(CustomField);\r\n\r\nGenderInput = connect(mapStateToProps)(GenderInput);\r\n\r\nexport { CustomField, GenderInput };\r\n","import React from \"react\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport {\r\n  SET_AUTH,\r\n  DEL_AUTH,\r\n  AUTH_ERROR,\r\n} from \"../../service/actions/profile-action\";\r\nimport { connect } from \"react-redux\";\r\nimport { required } from \"./validator\";\r\nimport \"./style.css\";\r\nimport { CustomField } from \"./input\";\r\nimport Profile from \"../../service/api/profile\";\r\n\r\nlet LoginForm = (props) => {\r\n  const Login = (values) => {\r\n    const profileApi = new Profile();\r\n    profileApi\r\n      .loginUser(values.username, values.password)\r\n      .then((tokens) => {\r\n        props.SET_AUTH();\r\n        localStorage.setItem(\"access\", JSON.stringify(tokens.access));\r\n        localStorage.setItem(\"refresh\", JSON.stringify(tokens.refresh));\r\n        props.history.push(\"/\");\r\n        window.location.reload(false);\r\n      })\r\n      .catch(() => {\r\n        props.AUTH_ERROR();\r\n      });\r\n  };\r\n  return (\r\n    <div className={\"wrapper \"}>\r\n      <div\r\n        className={\"form-wrapper \" + (props.light ? \"light-bg\" : \"black-bg\")}\r\n      >\r\n        <div className=\"custom-container\">\r\n          <div className=\"form-block\">\r\n            <form\r\n              className={\r\n                \"login-form \" + (props.light ? \"light-form\" : \"black-form\")\r\n              }\r\n              onSubmit={props.handleSubmit(Login)}\r\n            >\r\n              <div className=\"form-title\">\r\n                <h5>LOGIN</h5>\r\n              </div>\r\n              {props.authError ? (\r\n                <span className=\"text-danger\">\r\n                  Неправильный логин или пароль\r\n                </span>\r\n              ) : null}\r\n              <Field\r\n                name=\"username\"\r\n                component={CustomField}\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                className=\"form-control\"\r\n                props={{ label: \"Введите ваш логин\" }}\r\n                validate={[required]}\r\n              />\r\n              <Field\r\n                name=\"password\"\r\n                component={CustomField}\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                className=\"form-control\"\r\n                props={{ label: \"Введите ваш пароль\" }}\r\n                validate={[required]}\r\n              />\r\n              <button\r\n                className={\"btn btn-warning form-btn\"}\r\n                style={{ marginBottom: \"20px\" }}\r\n                type=\"submit\"\r\n              >\r\n                Войти\r\n              </button>\r\n              <span>\r\n                Нет аккаунта? <Link to=\"/register/\">Sign Up</Link>\r\n              </span>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n    isAuth: state.ProfileReducer.isAuth,\r\n    authError: state.ProfileReducer.authError,\r\n  };\r\n};\r\n\r\nLoginForm = reduxForm({\r\n  form: \"login-from\",\r\n})(LoginForm);\r\n\r\nexport default connect(mapStateToProps, { SET_AUTH, DEL_AUTH, AUTH_ERROR })(\r\n  withRouter(LoginForm)\r\n);\r\n","import React, { useState } from \"react\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./style.css\";\r\nimport { CustomField } from \"./input\";\r\nimport { required, passwordsMatch } from \"./validator\";\r\nimport Profile from \"../../service/api/profile\";\r\n\r\nlet RegisterForm = (props) => {\r\n  const [stateErr, putError] = useState(null);\r\n\r\n  const Register = (values) => {\r\n    const profileApi = new Profile();\r\n    const gender = values.gender === \"empty\" ? null : values.gender;\r\n    profileApi\r\n      .createUser(\r\n        values.username,\r\n        values.password,\r\n        values.re_password,\r\n        gender,\r\n        values.name\r\n      )\r\n      .then((tokens) => {\r\n        localStorage.setItem(\"access\", JSON.stringify(tokens.access));\r\n        localStorage.setItem(\"refresh\", JSON.stringify(tokens.refresh));\r\n        props.history.push(\"/\");\r\n      })\r\n      .catch((err) => {\r\n        const keys = Object.keys(err.response.data);\r\n        let errors = [];\r\n        keys.forEach((key) => {\r\n          errors.push(...err.response.data[key]);\r\n        });\r\n        putError(errors);\r\n      });\r\n  };\r\n  console.log(stateErr);\r\n  return (\r\n    <div className={\"wrapper \"}>\r\n      <div\r\n        className={\"form-wrapper \" + (props.light ? \"light-bg\" : \"black-bg\")}\r\n      >\r\n        <div className=\"custom-container\">\r\n          <div className=\"form-block\">\r\n            <form\r\n              className={\r\n                \"login-form \" + (props.light ? \"light-form\" : \"black-form\")\r\n              }\r\n              onSubmit={props.handleSubmit(Register)}\r\n            >\r\n              <div className=\"form-title\">\r\n                <h5>Register</h5>\r\n              </div>\r\n              <Field\r\n                name=\"name\"\r\n                component={CustomField}\r\n                type=\"text\"\r\n                placeholder=\"Имя\"\r\n                className=\"form-control\"\r\n                props={{ label: \"Введите ваш имя\" }}\r\n                validate={[required]}\r\n              />\r\n              <Field\r\n                name=\"username\"\r\n                component={CustomField}\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                className=\"form-control\"\r\n                props={{ label: \"Введите ваш никнейм\" }}\r\n                validate={[required]}\r\n              />\r\n              <div style={{ marginBottom: \"15px\" }}>\r\n                <label className=\"label\">Выберите пол:</label>\r\n                <Field\r\n                  name=\"gender\"\r\n                  type=\"text\"\r\n                  component=\"select\"\r\n                  props={{ label: \"Выберите пол\" }}\r\n                  className={\r\n                    \"form-control \" +\r\n                    (props.light ? \"light-input\" : \"black-input\")\r\n                  }\r\n                  style={props.light ? { color: \"aqua\" } : { color: \"red\" }}\r\n                >\r\n                  <option value=\"empty\"></option>\r\n                  <option value=\"male\">Мужской</option>\r\n                  <option value=\"female\">Женский</option>\r\n                </Field>\r\n              </div>\r\n              <Field\r\n                name=\"password\"\r\n                component={CustomField}\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                className=\"form-control\"\r\n                props={{ label: \"Введите ваш пароль\" }}\r\n                validate={[required]}\r\n              />\r\n              <Field\r\n                name=\"re_password\"\r\n                component={CustomField}\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                className=\"form-control\"\r\n                props={{ label: \"Повторите ваш пароль\" }}\r\n                validate={[required, passwordsMatch]}\r\n              />\r\n              {stateErr\r\n                ? stateErr.map((item) => (\r\n                    <span className=\"text-danger d-block\" key={item}>\r\n                      {item}\r\n                    </span>\r\n                  ))\r\n                : null}\r\n              <button className={\"btn btn-warning form-btn\"} type=\"submit\">\r\n                Зарегистрироваться\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n  };\r\n};\r\n\r\nRegisterForm = reduxForm({\r\n  form: \"register-from\",\r\n})(RegisterForm);\r\n\r\nexport default connect(mapStateToProps)(RegisterForm);\r\n","import React, { useRef, useState } from \"react\";\r\nimport Profile from \"../../service/api/profile\";\r\n\r\nconst ImagePopUp = ({ isOpen, setOpen }) => {\r\n  const inputEl = useRef(null);\r\n  const [res, setRes] = useState([]);\r\n\r\n  const load = async () => {\r\n    const api = new Profile();\r\n    const files = inputEl.current.files;\r\n    let data = new FormData();\r\n    data.append(\"image\", files[0], files[0].name);\r\n    api\r\n      .setimage(data, localStorage.getItem(\"access\").slice(1, -1))\r\n      .then((r) => {\r\n        setRes([\"success\", \"Загружено успешно\"]);\r\n      })\r\n      .catch((error) => {\r\n        setRes([\"danger\", \"Ошибка при загрузке\"]);\r\n      });\r\n  };\r\n  if (isOpen) {\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <div className=\"popup-background\">\r\n          <div className=\"popup-form\">\r\n            <span className=\"close\" onClick={() => setOpen(false)}>\r\n              X\r\n            </span>\r\n            {res !== [] ? (\r\n              <span className={`text-${res[0]} d-block`}>{res[1]}</span>\r\n            ) : null}\r\n            <input type=\"file\" ref={inputEl} style={{ display: \"block\" }} />\r\n            <button\r\n              className=\"btn btn-warning d-block mt-2\"\r\n              onClick={() => load()}\r\n            >\r\n              Загрузить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default ImagePopUp;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { required } from \"./validator\";\r\nimport { CustomField } from \"./input\";\r\nimport { Redirect, withRouter } from \"react-router-dom\";\r\nimport { SET_AUTH, DEL_AUTH } from \"../../service/actions/profile-action\";\r\nimport { getMyUser } from \"../../service/thunk/profile\";\r\nimport Profile from \"../../service/api/profile\";\r\nimport ImagePopUp from \"./image-popup\";\r\nimport BookItem from \"../catalog/book-item\";\r\n\r\nimport \"./style.css\";\r\n\r\nlet Private = (props) => {\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"access\")) {\r\n      const access = localStorage.getItem(\"access\").slice(1, -1);\r\n      props.getMyUser(access);\r\n    }\r\n  }, [props]);\r\n\r\n  useEffect(() => {\r\n    props.initialize(\r\n      {\r\n        name: props.myuser.first_name,\r\n        username: props.myuser.username,\r\n        gender: props.myuser.gender,\r\n      },\r\n      [props.myuser]\r\n    );\r\n  });\r\n\r\n  const changeValues = (values) => {\r\n    const api = new Profile();\r\n    const access = localStorage.getItem(\"access\").slice(1, -1);\r\n    api.changeMyProfile(values.username, values.name, values.gender, access);\r\n  };\r\n\r\n  const [subUrl, setSub] = useState(1);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  if (props.isAuth || JSON.parse(localStorage.getItem(\"isAuth\"))) {\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <div\r\n          className={\r\n            \"profile-wrapper \" + (props.light ? \"light-bg\" : \"black-bg\")\r\n          }\r\n        >\r\n          <div className=\"custom-container\">\r\n            <div\r\n              className={\r\n                \"detail-block row \" +\r\n                (props.light ? \"detail-block-lt\" : \"detail-block-bl\")\r\n              }\r\n            >\r\n              <div className=\"detail-img-block col-12 col-sm-3\">\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={props.myuser.image}\r\n                    className=\"detail-img profile-img\"\r\n                    alt=\"profile-img\"\r\n                  />\r\n                </div>\r\n                <div className=\"read\">\r\n                  <button\r\n                    className=\"btn btn-success btn-block\"\r\n                    onClick={() => setOpen(!open)}\r\n                  >\r\n                    Изменить фото\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div\r\n                className=\"detail-info-block col-12 col-sm-9\"\r\n                style={props.light ? { color: \"black\" } : { color: \"white\" }}\r\n              >\r\n                <div className=\"detail-main\">\r\n                  <div className=\"detail-nav prof-nav\">\r\n                    <span\r\n                      className={\r\n                        \"nav-btn \" + (subUrl === 1 ? \"active-btn\" : \"\")\r\n                      }\r\n                      onClick={() => {\r\n                        setSub(1);\r\n                      }}\r\n                    >\r\n                      Информация\r\n                    </span>\r\n                    <span\r\n                      className={\r\n                        \"nav-btn \" + (subUrl === 2 ? \"active-btn\" : \"\")\r\n                      }\r\n                      onClick={() => {\r\n                        setSub(2);\r\n                      }}\r\n                    >\r\n                      Понравившиеся\r\n                    </span>\r\n                  </div>\r\n                  {subUrl === 1 ? (\r\n                    <form\r\n                      style={{ marginLeft: \"10px\" }}\r\n                      onSubmit={props.handleSubmit(changeValues)}\r\n                    >\r\n                      <Field\r\n                        name=\"name\"\r\n                        component={CustomField}\r\n                        type=\"text\"\r\n                        placeholder=\"Name\"\r\n                        className=\"form-control\"\r\n                        props={{ label: \"Ваше Имя\" }}\r\n                        validate={[required]}\r\n                      />\r\n                      <Field\r\n                        name=\"username\"\r\n                        component={CustomField}\r\n                        type=\"text\"\r\n                        placeholder=\"Username\"\r\n                        className=\"form-control\"\r\n                        props={{ label: \"Ваш логин\" }}\r\n                        validate={[required]}\r\n                      />\r\n                      <div style={{ marginBottom: \"15px\" }}>\r\n                        <label className=\"label\">Выберите пол:</label>\r\n                        <Field\r\n                          name=\"gender\"\r\n                          type=\"text\"\r\n                          component=\"select\"\r\n                          props={{ label: \"Выберите пол\" }}\r\n                          className={\r\n                            \"form-control \" +\r\n                            (props.light ? \"light-input\" : \"black-input\")\r\n                          }\r\n                          style={\r\n                            props.light ? { color: \"aqua\" } : { color: \"red\" }\r\n                          }\r\n                        >\r\n                          <option value=\"male\">Мужской</option>\r\n                          <option value=\"female\">Женский</option>\r\n                        </Field>\r\n                      </div>\r\n                      <button className=\"btn btn-warning btn-block\">\r\n                        Сохранить изменения\r\n                      </button>\r\n                      <button\r\n                        className=\"btn btn-danger btn-block\"\r\n                        style={{ marginTop: \"15px\" }}\r\n                        onClick={() => {\r\n                          localStorage.removeItem(\"access\");\r\n                          localStorage.removeItem(\"refresh\");\r\n                          props.DEL_AUTH();\r\n                          window.location.reload(false);\r\n                          props.history.push(\"/\");\r\n                        }}\r\n                      >\r\n                        Выйти\r\n                      </button>\r\n                    </form>\r\n                  ) : (\r\n                    <div className=\"row\">\r\n                      {props.myuser.books_like.slice(0, 6).map((item) => (\r\n                        <div\r\n                          className=\"col-xl-4 col-md-4 col-6\"\r\n                          style={{ marginTop: \"15px\" }}\r\n                          key={item}\r\n                        >\r\n                          <BookItem item={item} />\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ImagePopUp isOpen={open} setOpen={setOpen} />\r\n      </div>\r\n    );\r\n  } else {\r\n    return <Redirect to=\"/login/\" />;\r\n  }\r\n};\r\n\r\nPrivate = reduxForm({\r\n  form: \"profile\",\r\n})(Private);\r\n\r\nconst privateStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n    isAuth: state.ProfileReducer.isAuth,\r\n    myuser: state.ProfileReducer.myuser,\r\n  };\r\n};\r\n\r\nconst PrivateProfile = connect(privateStateToProps, {\r\n  SET_AUTH,\r\n  DEL_AUTH,\r\n  getMyUser,\r\n})(withRouter(Private));\r\n\r\nexport { PrivateProfile };\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { getUserById } from \"../../service/thunk/profile\";\r\n\r\nlet Public = ({ params, light, user, getUserById }) => {\r\n  useEffect(() => {\r\n    const decodeurl = decodeURIComponent(params);\r\n    getUserById(decodeurl);\r\n  }, [getUserById, params]);\r\n\r\n  let date_joined;\r\n  if (user.date_joined !== undefined) {\r\n    const date_joined_id = user.date_joined.indexOf(\"T\");\r\n    date_joined = user.date_joined.slice(0, date_joined_id);\r\n  }\r\n\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <div className={\"profile-wrapper \" + (light ? \"light-bg\" : \"black-bg\")}>\r\n        <div className=\"custom-container\">\r\n          <div\r\n            className={\r\n              \"detail-block row \" +\r\n              (light ? \"detail-block-lt\" : \"detail-block-bl\")\r\n            }\r\n          >\r\n            <div className=\"detail-img-block col-12 col-sm-3\">\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                }}\r\n              >\r\n                <img\r\n                  src={user.image}\r\n                  className=\"detail-img profile-img\"\r\n                  alt=\"profile-img\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div\r\n              className=\"detail-info-block col-12 col-sm-9\"\r\n              style={light ? { color: \"black\" } : { color: \"white\" }}\r\n            >\r\n              <div className=\"detail-nav\">\r\n                <span className={\"nav-btn active-btn\"}>Информация</span>\r\n              </div>\r\n              <div style={{ marginLeft: \"10px\" }}>\r\n                <div>\r\n                  <h6>\r\n                    Имя: <span>{user.first_name}</span>\r\n                  </h6>\r\n                </div>\r\n                <div>\r\n                  <h6>\r\n                    Никнейм: <span>{user.username}</span>\r\n                  </h6>\r\n                </div>\r\n                <div>\r\n                  <h6>\r\n                    Дата создания: <span>{date_joined}</span>\r\n                  </h6>\r\n                </div>\r\n                <div>\r\n                  <h6>\r\n                    Пол:{\" \"}\r\n                    <span>{user.gender ? user.gender : \"Не определен\"}</span>\r\n                  </h6>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    light: state.bookReducer.light,\r\n    user: state.ProfileReducer.user,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { getUserById })(withRouter(Public));\r\n","import axios from \"axios\";\r\n\r\nconst checkingToken = async (access, refresh) => {\r\n  if (access !== \"\" && refresh !== \"\") {\r\n    let acc = access.slice(1, -1);\r\n    const request = await axios\r\n      .post(\"https://prod-reading.herokuapp.com/auth/jwt/verify/\", {\r\n        token: acc,\r\n      })\r\n      .catch(() => false);\r\n    if (request === false) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n};\r\n\r\nconst isToken = async () => {\r\n  const isaccess = localStorage.getItem(\"access\");\r\n  const isrefresh = localStorage.getItem(\"refresh\");\r\n  if (isaccess === null || isrefresh === null) {\r\n    localStorage.setItem(\"isAuth\", JSON.stringify(false));\r\n    return false;\r\n  } else {\r\n    const valid = await checkingToken(isaccess, isrefresh);\r\n    if (valid === false) {\r\n      localStorage.setItem(\"isAuth\", JSON.stringify(false));\r\n      localStorage.removeItem(\"access\");\r\n      localStorage.removeItem(\"refresh\");\r\n      return false;\r\n    } else {\r\n      console.log(\"true\");\r\n      localStorage.setItem(\"isAuth\", JSON.stringify(true));\r\n      return true;\r\n    }\r\n  }\r\n};\r\n\r\nexport { isToken };\r\n","import React, { useEffect } from \"react\";\nimport MainPage from \"./components/mainpage/mainpage\";\nimport { Route, Link } from \"react-router-dom\";\nimport FilterMainPage from \"./components/filter-page/main-block\";\nimport { connect } from \"react-redux\";\nimport { CHANGE_THEME } from \"./service/actions/books-action\";\nimport { SET_AUTH, DEL_AUTH } from \"./service/actions/profile-action\";\nimport { getMyUser } from \"./service/thunk/profile\";\nimport DetailPage from \"./components/detail-page/detail\";\nimport PagesBlock from \"./components/detail-page/page\";\nimport Loginform from \"./components/auth/login\";\nimport RegisterForm from \"./components/auth/register\";\nimport { PrivateProfile } from \"./components/auth/profile\";\nimport Public from \"./components/auth/public\";\nimport { isToken } from \"./service/auth/JWT\";\n\nconst App = ({ CHANGE_THEME, SET_AUTH, DEL_AUTH, getMyUser }) => {\n  useEffect(() => {\n    const status = isToken();\n    status.then((value) => {\n      if (value) {\n        SET_AUTH();\n        const access = localStorage.getItem(\"access\").slice(1, -1);\n        getMyUser(access);\n      } else {\n        DEL_AUTH();\n      }\n    });\n  }, [getMyUser, SET_AUTH, DEL_AUTH]);\n  return (\n    <div style={{ position: \"relative\" }}>\n      <nav className=\"my-nav\">\n        <div className=\"main-nav-part\">\n          <div>\n            <Link to=\"/\" style={{ textDecoration: \"none\" }}>\n              <h3 className=\"title-brand\">TITLE</h3>\n            </Link>\n          </div>\n          {window.screen.width > 800 ? (\n            <Link to=\"/filter/\" style={{ textDecoration: \"none\" }}>\n              <div className=\"cat-link\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"16\"\n                  height=\"16\"\n                  fill=\"currentColor\"\n                  className=\"bi bi-bar-chart-line-fill cat-icon\"\n                  viewBox=\"0 0 16 16\"\n                >\n                  <path d=\"M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2z\" />\n                </svg>\n                <span>Каталог</span>\n              </div>\n            </Link>\n          ) : null}\n        </div>\n        <div className=\"right-side-nav\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"16\"\n            height=\"16\"\n            fill=\"currentColor\"\n            className=\"bi bi-heptagon-half colorChanger\"\n            viewBox=\"0 0 16 16\"\n            onClick={() => {\n              CHANGE_THEME();\n            }}\n          >\n            <path d=\"M7.779.052a.5.5 0 0 1 .442 0l6.015 2.97a.5.5 0 0 1 .267.34l1.485 6.676a.5.5 0 0 1-.093.415l-4.162 5.354a.5.5 0 0 1-.395.193H4.662a.5.5 0 0 1-.395-.193L.105 10.453a.5.5 0 0 1-.093-.415l1.485-6.676a.5.5 0 0 1 .267-.34L7.779.053zM8 15h3.093l3.868-4.975-1.383-6.212L8 1.058V15z\" />\n          </svg>\n          <Link to=\"/me/\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              fill=\"currentColor\"\n              className=\"bi bi-person-lines-fill profileIcon\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path d=\"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z\" />\n            </svg>\n          </Link>\n        </div>\n      </nav>\n      <Route path=\"/\" component={MainPage} exact />\n      <Route\n        path=\"/filter/:name?\"\n        render={({ match }) => {\n          return <FilterMainPage params={match.params} />;\n        }}\n        exact\n      />\n      <Route\n        path=\"/detail/:id\"\n        render={({ match }) => {\n          return <DetailPage params={match.params} />;\n        }}\n        exact\n      />\n      <Route\n        path=\"/detail/pages/:id\"\n        render={({ match }) => {\n          return <PagesBlock params={match.params} />;\n        }}\n        exact\n      />\n      <Route path=\"/login/\" component={Loginform} exact />\n      <Route path=\"/register/\" component={RegisterForm} exact />\n      <Route path=\"/me/\" component={PrivateProfile} exact />\n      <Route\n        path=\"/profile/:id?\"\n        render={({ match }) => <Public params={match.params.id} />}\n        exact\n      />\n    </div>\n  );\n};\n\nexport default connect(null, { CHANGE_THEME, SET_AUTH, DEL_AUTH, getMyUser })(\n  App\n);\n","const initialState = {\r\n  mostRated: [],\r\n  mostPopular: [],\r\n  newest: [],\r\n  booksLoading: false,\r\n  light: false,\r\n  types: [],\r\n  genre: [],\r\n  category: [],\r\n  books: [],\r\n  count: 0,\r\n  next: \"\",\r\n  previous: \"\",\r\n};\r\n\r\nconst bookReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"FETCHING_DATA\":\r\n      return { ...state, booksLoading: true };\r\n    case \"GET_THE_MOST_RATED\":\r\n      return { ...state, mostRated: action.data, booksLoading: false };\r\n    case \"GET_THE_MOST_POPULAR\":\r\n      return { ...state, mostPopular: action.data, booksLoading: false };\r\n    case \"GET_THE_NEWEST\":\r\n      return { ...state, newest: action.data, booksLoading: false };\r\n    case \"GET_TYPES\":\r\n      return { ...state, types: action.data };\r\n    case \"GET_GENRE\":\r\n      return { ...state, genre: action.data };\r\n    case \"GET_CATEGORY\":\r\n      return { ...state, category: action.data };\r\n    case \"GET_BOOKS\":\r\n      return {\r\n        ...state,\r\n        books: action.data.results,\r\n        count: action.data.page_count,\r\n        next: action.data.next,\r\n        previous: action.data.previous,\r\n        booksLoading: false,\r\n      };\r\n    case \"CHANGE_THEME\":\r\n      return { ...state, light: !state.light };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default bookReducer;\r\n","const initialState = {\r\n  title: \"\",\r\n  description: \"\",\r\n  views: 0,\r\n  created_date: 0,\r\n  status: \"\",\r\n  category: [],\r\n  genre: [],\r\n  types: \"\",\r\n  poster: \"\",\r\n  is_liked: false,\r\n  average_rating: 0,\r\n  id: 0,\r\n  chapters: [],\r\n  page_count: 0,\r\n  count: 0,\r\n  Chapterloading: false,\r\n  bookLoading: false,\r\n  pages_info: [],\r\n  pages: [],\r\n  pages_loading: false,\r\n  reviews: [],\r\n};\r\n\r\nconst BookDetailReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"FETCHING_CHAPTER\":\r\n      return { ...state, Chapterloading: true };\r\n    case \"FETCHING_BOOK\":\r\n      return { ...state, bookLoading: true };\r\n    case \"FETCHING_PAGES\":\r\n      return { ...state, pages_loading: true };\r\n    case \"GET_DETAIL_BOOK\":\r\n      return {\r\n        ...state,\r\n        title: action.data.title,\r\n        description: action.data.description,\r\n        views: action.data.views,\r\n        created_date: action.data.created_date,\r\n        status: action.data.status,\r\n        category: action.data.category,\r\n        genre: action.data.genre,\r\n        types: action.data.types,\r\n        poster: action.data.poster,\r\n        is_liked: action.data.is_liked,\r\n        average_rating: action.data.average_rating,\r\n        id: action.data.id,\r\n        bookLoading: false,\r\n      };\r\n    case \"GET_CHAPTERS\":\r\n      return {\r\n        ...state,\r\n        page_count: action.data.page_count,\r\n        count: action.data.count,\r\n        chapters: action.data.results,\r\n        Chapterloading: false,\r\n      };\r\n    case \"GET_PAGES\":\r\n      return {\r\n        ...state,\r\n        pages_info: {\r\n          title: action.data.title,\r\n          created_date: action.data.created_date,\r\n        },\r\n        pages: [action.data.page],\r\n        pages_loading: false,\r\n      };\r\n    case \"GET_REVIEWS\":\r\n      return {\r\n        ...state,\r\n        reviews: action.data,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default BookDetailReducer;\r\n","const initialState = {\r\n  isAuth: false,\r\n  authError: false,\r\n  myuser: [],\r\n  user: [],\r\n};\r\n\r\nconst ProfileReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"SET_AUTH\":\r\n      return { ...state, isAuth: true };\r\n    case \"DEL_AUTH\":\r\n      return { ...state, isAuth: false };\r\n    case \"AUTH_ERROR\":\r\n      return { ...state, authError: true };\r\n    case \"GET_MY_USER\":\r\n      return { ...state, myuser: action.data };\r\n    case \"GET_USER_BY_ID\":\r\n      return { ...state, user: action.data };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default ProfileReducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport { combineReducers } from \"redux\";\r\n\r\nimport bookReducer from \"./components/reducers/books\";\r\nimport BookDetailReducer from \"./components/reducers/detail-book\";\r\nimport ProfileReducer from \"./components/reducers/profile\";\r\n\r\nconst store = createStore(\r\n  combineReducers({\r\n    bookReducer,\r\n    BookDetailReducer,\r\n    ProfileReducer,\r\n    form: formReducer,\r\n  }),\r\n  applyMiddleware(thunk)\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}