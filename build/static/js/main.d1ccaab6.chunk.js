(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{126:function(e,t,a){},127:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),c=a.n(r),s=a(52),i=a.n(s),o=(a(126),a(127),a(14)),l=Object(o.f)((function(e){var t=e.history,a=Object(r.useRef)(null);return Object(n.jsxs)("div",{className:"search-wrapper",children:[Object(n.jsx)("input",{className:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a...",ref:a}),Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-search search-icon",viewBox:"0 0 16 16",type:"button",onClick:function(){return function(){var e=a.current.value;t.push("/filter/title="+e)}()},children:Object(n.jsx)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})})]})})),d=a(3),u=a(116),b=a.n(u),j=Object(o.f)((function(e){var t=e.item,a=e.margin,r=e.light,c=e.history;return Object(n.jsxs)("div",{className:"book-card"+(0===a?" book-card-filter":""),onClick:function(){c.push("/detail/id=".concat(t.id))},children:[Object(n.jsx)("img",{src:t.poster,className:"book-image",alt:"poster"}),Object(n.jsx)("h6",{className:"book-name",style:r?{color:"black"}:{color:"white"},children:t.title}),Object(n.jsx)("span",{className:"book-list-cat",style:r?{color:"black"}:{color:"white"},children:t.types})]})})),p=a(6),h=function(){return{type:"CHANGE_THEME"}},m=a(5),g=a.n(m),f=a(11),O=a(53),x=a(54),v=a(12),k=a.n(v),w="https://prod-reading.herokuapp.com/";function y(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var N,_=function(){function e(){Object(O.a)(this,e)}return Object(x.a)(e,[{key:"getMostRatedBooks",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(w+"api/books/filtered?average_rating=1");case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.abrupt("return",t.data);case 7:return e.abrupt("return",404);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getMostPopularBooks",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(w+"api/books/filtered?views=1");case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.abrupt("return",t.data);case 7:return e.abrupt("return",404);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getTheNewestChapters",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(w+"api/books/chapters");case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.abrupt("return",t.data);case 7:return e.abrupt("return",404);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getFilterList",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(w+"api/books/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",404);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllOrFilterBooks",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(w+"api/books/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",404);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChapterByBook",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a,n,r=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:1,e.next=3,k.a.get(w+"api/books/book-detail-c/".concat(t,"?page=").concat(a));case 3:if(200!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",n.data);case 8:return e.abrupt("return",404);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNotOrderedChapterByBook",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(w+"api/books/chapter-wp/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",404);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDetailBook",value:function(){var e=Object(f.a)(g.a.mark((function e(t,a){var n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,a&&(n=a.slice(1,-1)),r=t.replace("id=",""),null===n){e.next=9;break}return e.next=6,k.a.get(w+"api/books/".concat(r),{headers:{Authorization:"JWT "+a}});case 6:c=e.sent,e.next=12;break;case 9:return e.next=11,k.a.get(w+"api/books/".concat(r));case 11:c=e.sent;case 12:if(200!==c.status){e.next=16;break}return e.abrupt("return",c.data);case 16:return e.abrupt("return",404);case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getPagesByChapter",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(w+"api/books/chapter/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",404);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLike",value:function(){var e=Object(f.a)(g.a.mark((function e(t,a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put(w+"api/books/".concat(t),{likes_update:1},{headers:{Authorization:"JWT "+a}},{"X-CSRFToken":y("csrftoken")});case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.abrupt("return",n.data);case 7:throw new Error("bad request");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getReviews",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(w+"api/books/book-review/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",404);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setReview",value:function(){var e=Object(f.a)(g.a.mark((function e(t,a,n,r,c){var s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post(w+"api/books/set_rating",{user:a,book:t,star:n,text:r},{headers:{Authorization:"JWT "+c}},{"X-CSRFToken":y("csrftoken")});case 2:if(201!==(s=e.sent).status){e.next=7;break}return e.abrupt("return",s.data);case 7:throw new Error("bad request");case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}()}]),e}(),E=new _,T=function(e){return function(t){t({type:"FETCHING_DATA"}),E.getAllOrFilterBooks(e).then((function(e){t(function(e){return{type:"GET_BOOKS",data:e}}(e))}))}};N=window.screen.width>850?{dots:!1,infinite:!1,speed:500,slidesToShow:5,slidesToScroll:1}:window.screen.width>600?{dots:!1,infinite:!1,speed:500,slidesToShow:3,slidesToScroll:1}:{dots:!1,infinite:!1,arrows:!1,speed:500,slidesToShow:2,slidesToScroll:1};var C=Object(p.b)((function(e){return{books:e.bookReducer.mostRated}}),{getMostRatedBooks:function(){return function(e){e({type:"FETCHING_DATA"}),E.getMostRatedBooks().then((function(t){e(function(e){return{type:"GET_THE_MOST_RATED",data:e}}(t))}))}}})((function(e){var t=e.books,a=e.getMostRatedBooks;return Object(r.useEffect)((function(){a()}),[a]),Object(n.jsxs)("div",{className:"books-block",children:[Object(n.jsx)("h4",{style:{color:"white"},children:"\u0427\u0442\u043e \u043f\u043e\u0447\u0438\u0442\u0430\u0435\u043c?"}),Object(n.jsx)("div",{className:"book-slider",children:Object(n.jsx)(b.a,Object(d.a)(Object(d.a)({},N),{},{children:t.map((function(e,t){return Object(n.jsx)(j,{item:e},t)}))}))})]})})),R=(a(63),Object(o.f)((function(e){var t=e.item,a=e.light,r=e.history,c=new Date(t.created_date);return Object(n.jsxs)("div",{className:"new-compos",style:{background:a?"#fafafa":"#191919",borderBottom:a?"1px solid rgb(234, 234, 234)":"1px solid rgb(44, 44, 44)"},onClick:function(){return r.push("/detail/id=".concat(t.book.id))},children:[Object(n.jsx)("div",{className:"compos-img-wrapper",children:Object(n.jsx)("img",{src:t.book.poster,className:"comspos-img",alt:"poster"})}),Object(n.jsxs)("div",{className:"compos-info",children:[Object(n.jsx)("h6",{className:"limit-line",children:t.title}),Object(n.jsx)("span",{style:{fontWeight:"400",display:"block",marginBottom:"5px"},children:t.chapter_num}),Object(n.jsx)("span",{style:{fontWeight:"300",display:"block",opacity:"0.8"},children:new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"2-digit"}).format(c)})]})]})}))),S=Object(o.f)((function(e){var t=e.item,a=e.light,r=e.history,c=new Date(t.created_date);return Object(n.jsxs)("div",{className:"new-compos",style:{background:a?"#fafafa":"#191919"},onClick:function(){return r.push("/detail/id=".concat(t.book.id))},children:[Object(n.jsx)("div",{className:"compos-img-wrapper",children:Object(n.jsx)("img",{src:t.book.poster,className:"comspos-img",alt:"poster"})}),Object(n.jsxs)("div",{className:"compos-info",children:[Object(n.jsx)("h6",{children:t.title}),Object(n.jsx)("span",{style:{fontWeight:"400",display:"block",marginBottom:"5px"},children:t.chapter_num}),Object(n.jsx)("span",{style:{fontWeight:"300",display:"block",opacity:"0.8"},children:new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"2-digit"}).format(c)})]})]})})),A=Object(o.f)((function(e){var t=e.item,a=e.history;return Object(n.jsxs)("div",{className:"pop-compos",onClick:function(){return a.push("/detail/id=".concat(t.id))},children:[Object(n.jsx)("div",{className:"pop-img-wrapper",children:Object(n.jsx)("img",{src:t.poster,className:"pop-img",alt:"poster"})}),Object(n.jsx)("div",{className:"pop-info",children:Object(n.jsx)("h6",{children:t.title})})]})})),B=Object(p.b)((function(e){return{mostPopular:e.bookReducer.mostPopular,newest:e.bookReducer.newest,light:e.bookReducer.light}}),{getMostPopularBooks:function(){return function(e){e({type:"FETCHING_DATA"}),E.getMostPopularBooks().then((function(t){e(function(e){return{type:"GET_THE_MOST_POPULAR",data:e}}(t))}))}},getTheNewestChapters:function(){return function(e){e({type:"FETCHING_DATA"}),E.getTheNewestChapters().then((function(t){e(function(e){return{type:"GET_THE_NEWEST",data:e}}(t))}))}}})((function(e){var t=e.mostPopular,a=e.newest,c=e.light,s=e.getMostPopularBooks,i=e.getTheNewestChapters;return Object(r.useEffect)((function(){s(),i()}),[s,i]),Object(n.jsxs)("div",{className:"catalog-2 "+(c?"light-bg":"black-bg"),children:[Object(n.jsx)("div",{className:"line"}),Object(n.jsx)("div",{className:"catalog-2-main-block",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"new-compositions col-12 col-lg-8",children:[Object(n.jsx)("h3",{style:{paddingBottom:"2rem"},children:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f"}),Object(n.jsx)("div",{className:"",children:window.screen.width>900?a.map((function(e,t){return Object(n.jsx)(S,{item:e,light:c},t)})):Object(n.jsx)("div",{className:"new-compos-mob",children:a.map((function(e,t){return Object(n.jsx)(R,{item:e,light:c},t)}))})})]}),Object(n.jsxs)("div",{className:"popular-compos col-12 col-lg-4",children:[Object(n.jsx)("h3",{style:{paddingBottom:"2rem"},children:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435"}),Object(n.jsx)("div",{children:t.map((function(e,t){return Object(n.jsx)(A,{item:e},t)}))})]}),Object(n.jsx)("div",{className:"bottom-line"})]})})]})})),I=a(8),H=Object(p.b)(null,{CHANGE_THEME:h})((function(e){e.history;var t=e.CHANGE_THEME;return Object(n.jsxs)("nav",{className:"my-nav",children:[Object(n.jsxs)("div",{className:"main-nav-part",children:[Object(n.jsx)("div",{children:Object(n.jsx)(I.b,{to:"/",style:{textDecoration:"none"},children:Object(n.jsx)("h3",{className:"title-brand",children:"TITLE"})})}),window.screen.width>800?Object(n.jsx)(I.b,{to:"/filter/",style:{textDecoration:"none"},children:Object(n.jsxs)("div",{className:"cat-link",children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-bar-chart-line-fill cat-icon",viewBox:"0 0 16 16",children:Object(n.jsx)("path",{d:"M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2z"})}),Object(n.jsx)("span",{children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})]})}):null]}),Object(n.jsxs)("div",{className:"right-side-nav",children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-heptagon-half colorChanger",viewBox:"0 0 16 16",onClick:function(){t()},children:Object(n.jsx)("path",{d:"M7.779.052a.5.5 0 0 1 .442 0l6.015 2.97a.5.5 0 0 1 .267.34l1.485 6.676a.5.5 0 0 1-.093.415l-4.162 5.354a.5.5 0 0 1-.395.193H4.662a.5.5 0 0 1-.395-.193L.105 10.453a.5.5 0 0 1-.093-.415l1.485-6.676a.5.5 0 0 1 .267-.34L7.779.053zM8 15h3.093l3.868-4.975-1.383-6.212L8 1.058V15z"})}),Object(n.jsx)(I.b,{to:"/me/",children:Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-person-lines-fill profileIcon",viewBox:"0 0 16 16",children:Object(n.jsx)("path",{d:"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"})})})]})]})})),D=Object(p.b)(null,{CHANGE_THEME:h})((function(e){e.CHANGE_THEME;return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(H,{}),Object(n.jsxs)("div",{className:"wrapper",children:[Object(n.jsx)("div",{className:"bg-im",children:Object(n.jsxs)("div",{className:"custom-container",children:[Object(n.jsx)(l,{}),Object(n.jsx)(C,{})]})}),Object(n.jsx)(B,{})]})]})})),G=(a(64),a(118)),P=a(58),L=Object(p.b)((function(e){return{light:e.bookReducer.light,types:e.bookReducer.types,genre:e.bookReducer.genre,category:e.bookReducer.category}}),{getCategory:function(){return function(e){e({type:"FETCHING_DATA"}),E.getFilterList("category").then((function(t){e(function(e){return{type:"GET_CATEGORY",data:e}}(t))}))}},getTypes:function(){return function(e){e({type:"FETCHING_DATA"}),E.getFilterList("types").then((function(t){e(function(e){return{type:"GET_TYPES",data:e}}(t))}))}},getGenre:function(){return function(e){e({type:"FETCHING_DATA"}),E.getFilterList("genre").then((function(t){e(function(e){return{type:"GET_GENRE",data:e}}(t))}))}}})(Object(o.f)((function(e){var t=e.light,a=e.types,c=e.genre,s=e.category,i=e.getCategory,o=e.getTypes,l=e.getGenre,d=e.history,u=e.params,b=Object(r.useRef)(null),j=Object(r.useRef)(null),p=function(e){var t=decodeURIComponent(e);if(e){var a=t.indexOf("&");return a>-1?t.slice(0,a).replace("title=",""):t.replace("title=","")}}(u.name);Object(r.useEffect)((function(){i(),o(),l()}),[i,o,l]);var h=function(){var e=b.current.querySelectorAll(".filter-choice"),t=[];e.forEach((function(e){var a=e.parentElement.id,n=e.childNodes;n[0].checked&&t.push(Object(G.a)({},a,n[1].textContent))}));var a=function(e){var t="",a=[];return e.forEach((function(e){for(var t in e)a.push(t)})),(a=Object(P.a)(new Set(a))).forEach((function(a){var n="";e.forEach((function(e){void 0!==e[a]&&(n+="".concat(e[a],","))})),n=n.substring(0,n.length-1),t+="&".concat(a,"=").concat(n)})),t}(t),n=j.current.value,r="title=".concat(n.length>0?n:"")+a+"&page=1";d.push("/filter/".concat(r))};return Object(n.jsxs)("div",{className:"filters w-100",children:[Object(n.jsx)("h3",{style:{height:"3rem",margin:"0",textAlign:"center"},children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"}),Object(n.jsxs)("div",{className:"filter-block",children:[Object(n.jsx)("input",{className:"filter-input"+(t?" input-white":" input-black"),placeholder:"\u041f\u043e\u0438\u0441\u043a",ref:j,defaultValue:p}),Object(n.jsxs)("div",{className:"dropwdowns",ref:b,children:[Object(n.jsxs)("div",{className:"filter-dropdown",children:[Object(n.jsxs)("button",{className:"filter-dropdown-button m-0"+(t?" dropdown-white":" dropdown-black"),children:["\u0422\u0438\u043f\u044b",Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-caret-down dropdown-icon",viewBox:"0 0 16 16",children:Object(n.jsx)("path",{d:"M3.204 5h9.592L8 10.481 3.204 5zm-.753.659l4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z"})})]}),Object(n.jsx)("div",{className:"dropdown-list first"+(t?" dropdown-white":" dropdown-black"),id:"types",children:a.map((function(e,t){return Object(n.jsxs)("div",{className:"filter-choice",children:[Object(n.jsx)("input",{type:"checkbox",className:"filter-choice-checkbox"}),Object(n.jsx)("label",{children:e.title})]},t)}))})]}),Object(n.jsxs)("div",{className:"filter-dropdown",children:[Object(n.jsxs)("button",{className:"filter-dropdown-button m-0"+(t?" dropdown-white":" dropdown-black"),children:["\u0416\u0430\u043d\u0440\u044b",Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-caret-down dropdown-icon",viewBox:"0 0 16 16",children:Object(n.jsx)("path",{d:"M3.204 5h9.592L8 10.481 3.204 5zm-.753.659l4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z"})})]}),Object(n.jsx)("div",{className:"dropdown-list first"+(t?" dropdown-white":" dropdown-black"),id:"genres",children:c.map((function(e,t){return Object(n.jsxs)("div",{className:"filter-choice",children:[Object(n.jsx)("input",{type:"checkbox",className:"filter-choice-checkbox"}),Object(n.jsx)("label",{children:e.title})]},t)}))})]}),Object(n.jsxs)("div",{className:"filter-dropdown",children:[Object(n.jsxs)("button",{className:"filter-dropdown-button m-0"+(t?" dropdown-white":" dropdown-black"),children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-caret-down dropdown-icon",viewBox:"0 0 16 16",children:Object(n.jsx)("path",{d:"M3.204 5h9.592L8 10.481 3.204 5zm-.753.659l4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z"})})]}),Object(n.jsx)("div",{className:"dropdown-list"+(t?" dropdown-white":" dropdown-black"),id:"category",children:s.map((function(e,t){return Object(n.jsxs)("div",{className:"filter-choice",children:[Object(n.jsx)("input",{type:"checkbox",className:"filter-choice-checkbox"}),Object(n.jsx)("label",{children:e.title})]},t)}))})]})]})]}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)("button",{onClick:function(){return h()},className:"btn mt-3"+(t?" btn-secondary":" btn-dark"),style:{paddingLeft:"2rem",paddingRight:"2rem",fontSize:"18px"},children:"\u041d\u0430\u0439\u0442\u0438"})})]})}))),U=Object(p.b)((function(e){return{books:e.bookReducer.books,count:e.bookReducer.count,booksLoading:e.bookReducer.booksLoading}}),{getBooks:T})(Object(o.f)((function(e){var t=e.books,a=e.params,c=e.getBooks,s=e.light;e.booksLoading,e.count;return Object(r.useEffect)((function(){var e=decodeURIComponent(a.name);c("?"+e)}),[a,c]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"row book-list-filter",children:t.map((function(e,t){return Object(n.jsx)("div",{className:"col-lg-2 col-md-3 col-4 p-0",children:Object(n.jsx)(j,{item:e,margin:0,light:s})},t)}))})})}))),M=a(15),z=a(56),F=a.n(z),J=function(e){var t=e.light;return Object(n.jsx)("span",{className:"pagination-btn"+(t?" light-pagination":" dark-pagination"),children:"\u2039"})},W=function(e){var t=e.light;return Object(n.jsx)("span",{className:"pagination-btn"+(t?" light-pagination":" dark-pagination"),children:"\u203a"})},q=Object(o.f)((function(e){var t=e.numPage,a=e.light,c=e.params,s=e.history,i=Object(r.useState)(0),o=Object(M.a)(i,2),l=o[0],d=o[1];return Object(r.useEffect)((function(){if(void 0!==c){var e=c.match(/&page=(\d{0,})/gm);if(e){var t=e[0].replace("&page=","");d(parseInt(t)-1)}}}),[c]),Object(n.jsx)(F.a,{pageCount:t,pageRangeDisplayed:4,marginPagesDisplayed:1,containerClassName:"pagination",pageClassName:"pagination-btn"+(a?" light-pagination":" dark-pagination"),breakClassName:"pagination-btn"+(a?" light-pagination":" dark-pagination"),activeClassName:a?" light-active":" dark-active",activeLinkClassName:"active-link",previousLabel:Object(n.jsx)(J,{light:a}),nextLabel:Object(n.jsx)(W,{light:a}),previousClassName:"previous-btn",nextClassName:"next-btn",onPageChange:function(e){var t=decodeURIComponent(c),a=e.selected+1;if(void 0===c)s.push("/filter/title=&page=".concat(a));else{var n=t.match(/&page=(\d{0,})/gm);if(n){var r=t.replace(n[0],"&page=".concat(a));s.push("/filter/".concat(r))}else s.push("/filter/".concat(t,"&page=").concat(a))}},initialPage:0,forcePage:l})})),X=Object(p.b)((function(e){return{light:e.bookReducer.light,count:e.bookReducer.count}}),{getBooks:T})((function(e){var t=e.light,a=e.params,r=e.count;return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(H,{}),Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)("div",{className:"filter-wrapper"+(t?" white-bg":" black-bg"),children:Object(n.jsxs)("div",{className:"custom-container",children:[Object(n.jsx)(L,{params:a}),Object(n.jsx)(U,{params:a,light:t}),Object(n.jsx)(q,{params:a.name,numPage:r,p:0,light:t})]})})})]})})),Y=function(){return{type:"SET_AUTH"}},V=function(){return localStorage.setItem("isAuth","false"),{type:"DEL_AUTh"}},K="https://prod-reading.herokuapp.com/";function Q(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var Z=function(){function e(){Object(O.a)(this,e)}return Object(x.a)(e,[{key:"createUser",value:function(){var e=Object(f.a)(g.a.mark((function e(t,a,n,r,c){var s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post(K+"auth/users/",{username:t,password:a,re_password:n,gender:r,first_name:c},{"X-CSRFToken":Q("csrftoken")});case 2:if(201!==(s=e.sent).status){e.next=7;break}return e.abrupt("return",s.data);case 7:return e.abrupt("return",s.data);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(f.a)(g.a.mark((function e(t,a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post(K+"auth/jwt/create/",{username:t,password:a},{"X-CSRFToken":Q("csrftoken")});case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.abrupt("return",n.data);case 7:throw new Error("bad request");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getMyUser",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(K+"api/user/my_profile",{"X-CSRFToken":Q("csrftoken"),headers:{Authorization:"JWT "+t}});case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:throw new Error("bad request");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeMyProfile",value:function(){var e=Object(f.a)(g.a.mark((function e(t,a,n,r){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put(K+"api/user/my_profile",{username:t,first_name:a,gender:n},{"X-CSRFToken":Q("csrftoken"),headers:{Authorization:"JWT "+r}});case 2:if(200!==(c=e.sent).status){e.next=7;break}return e.abrupt("return",c.data);case 7:throw new Error("bad request");case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"setimage",value:function(){var e=Object(f.a)(g.a.mark((function e(t,a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post(K+"api/user/my_profile",t,{headers:{Authorization:"JWT "+a,"content-type":"multipart/form-data"}});case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.abrupt("return",n.data);case 7:throw new Error("bad request");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getUserById",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(K+"api/user/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:throw new Error("bad request");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$=new Z,ee=function(e){return function(t){$.getMyUser(e).then((function(e){t(function(e){return{type:"GET_MY_USER",data:e}}(e))}))}},te=function(e){return console.log(e),{type:"GET_DETAIL_BOOK",data:e}},ae=new _,ne=function(e,t){return function(a){a({type:"FETCHING_CHAPTER"}),ae.getChapterByBook(e,t).then((function(e){a(function(e){return{type:"GET_CHAPTERS",data:e}}(e))}))}},re=Object(o.f)((function(e){var t=e.isOpen,a=e.setOpen,s=e.isAuth,i=e.book_id,l=e.user_id,d=e.history,u=Object(r.useState)(0),b=Object(M.a)(u,2),j=b[0],p=b[1],h=Object(r.useState)(""),m=Object(M.a)(h,2),g=m[0],f=m[1],O=Object(r.useState)(""),x=Object(M.a)(O,2),v=x[0],k=x[1];return t?s||JSON.parse(localStorage.getItem("isAuth"))?Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)("svg",{style:{display:"none"},children:Object(n.jsx)("symbol",{id:"star2",viewBox:"0 -10 511.98685 511",children:Object(n.jsx)("g",{children:Object(n.jsx)("path",{d:"m510.652344 185.902344c-3.351563-10.367188-12.546875-17.730469-23.425782-18.710938l-147.773437-13.417968-58.433594-136.769532c-4.308593-10.023437-14.121093-16.511718-25.023437-16.511718s-20.714844 6.488281-25.023438 16.535156l-58.433594 136.746094-147.796874 13.417968c-10.859376 1.003906-20.03125 8.34375-23.402344 18.710938-3.371094 10.367187-.257813 21.738281 7.957031 28.90625l111.699219 97.960937-32.9375 145.089844c-2.410156 10.667969 1.730468 21.695313 10.582031 28.09375 4.757813 3.4375 10.324219 5.1875 15.9375 5.1875 4.839844 0 9.640625-1.304687 13.949219-3.882813l127.46875-76.183593 127.421875 76.183593c9.324219 5.609376 21.078125 5.097657 29.910156-1.304687 8.855469-6.417969 12.992187-17.449219 10.582031-28.09375l-32.9375-145.089844 111.699219-97.941406c8.214844-7.1875 11.351563-18.539063 7.980469-28.925781zm0 0"})})})}),Object(n.jsx)("div",{className:"popup-background",children:Object(n.jsxs)("div",{className:"popup-form",children:[Object(n.jsx)("span",{className:"close",onClick:function(){return a(!1)},children:"X"}),Object(n.jsxs)("div",{className:"set-star",children:[v?Object(n.jsx)("span",{className:"text-danger",children:v}):null,[1,2,3,4,5].map((function(e){return Object(n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(n.jsx)("svg",{className:"icon-detail star"+(j===e?" chosenStar":""),onClick:function(){return p(e)},children:Object(n.jsx)("use",{xlinkHref:"#star2"})}),Object(n.jsx)("span",{className:"star-value",style:{color:"white",paddingRight:"10px"},children:e})]},e)}))]}),Object(n.jsxs)("div",{className:"set-comment-value",children:[Object(n.jsx)("div",{style:{color:"white",marginBottom:"10px",marginTop:"10px"},children:Object(n.jsx)("h6",{children:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439:"})}),Object(n.jsx)("textarea",{rows:"5",cols:"50",style:{background:"black",outline:"none",border:"0",color:"white"},className:"form-control",onChange:function(e){return function(e){var t=e;null!==e.match(/(\r\n|\n|\r)/gm)&&(t=e.replace(/(\r\n|\n|\r)/gm,"<br>")),null!==t.match(/\s{2,}/g)&&(t=t.replace(/\s{2,}/g," ")),f(t)}(e.target.value)}}),Object(n.jsx)("button",{className:"btn btn-warning mt-2",onClick:function(){return function(){var e=localStorage.getItem("access");e?(e=e.slice(1,-1),(new _).setReview(i,l,j,g,e).catch((function(){k("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0432\u0435\u0437\u0434\u0443")})),a(!1)):(localStorage.setItem("isAuth","false"),localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.reload(!1),d.push("/login/"))}()},children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]})]})})]}):Object(n.jsx)(o.a,{to:"/login/"}):null})),ce=Object(p.b)((function(e){return{light:e.bookReducer.light}}))(Object(o.f)((function(e){var t=e.light,a=e.item,r=e.history;return Object(n.jsx)("div",{className:"chapter-item",style:{background:t?"#fafafa":"#121212"},onClick:function(){return r.push("/detail/pages/".concat(a.id))},children:Object(n.jsxs)("div",{className:"chapter-info",children:[Object(n.jsxs)("h6",{children:[a.title," "]}),Object(n.jsx)("span",{children:a.created_date})]})})}))),se=(a(95),Object(o.f)((function(e){var t=e.item,a=e.light,c=e.history,s=Object(r.useState)(0),i=Object(M.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){var e=t.star,a=parseInt(e)/5*100;l(a)}),[t]),Object(n.jsxs)("div",{className:"review-item",style:{background:a?"#fafafa":"#121212"},children:[Object(n.jsx)("div",{className:"review-img-wrapper",children:Object(n.jsx)("img",{src:t.user.image,className:"review-img",alt:"poster"})}),Object(n.jsxs)("div",{className:"review-text",children:[Object(n.jsx)("h6",{onClick:function(){return c.push("/profile/"+t.user.id)},className:"comment-title",style:{display:"inline",cursor:"pointer"},children:t.user.username}),Object(n.jsx)("div",{className:"rating",children:Object(n.jsxs)("div",{className:"rating__body",children:[Object(n.jsx)("div",{className:"rating__active",style:{width:"".concat(o,"%")}}),Object(n.jsxs)("div",{className:"rating__items",children:[Object(n.jsx)("input",{type:"radio",className:"rating__item",value:1}),Object(n.jsx)("input",{type:"radio",className:"rating__item",value:2}),Object(n.jsx)("input",{type:"radio",className:"rating__item",value:3}),Object(n.jsx)("input",{type:"radio",className:"rating__item",value:4}),Object(n.jsx)("input",{type:"radio",className:"rating__item",value:5})]})]})}),Object(n.jsx)("p",{dangerouslySetInnerHTML:{__html:t.text}})]})]})}))),ie=function(e){var t=e.light;return Object(n.jsx)("span",{className:"pagination-btn"+(t?" light-pagination":" dark-pagination"),children:"\u2039"})},oe=function(e){var t=e.light;return Object(n.jsx)("span",{className:"pagination-btn"+(t?" light-pagination":" dark-pagination"),children:"\u203a"})},le=Object(o.f)((function(e){var t=e.numPage,a=e.light,r=e.params,c=e.history;return Object(n.jsx)(F.a,{pageCount:t,pageRangeDisplayed:4,marginPagesDisplayed:1,containerClassName:"pagination",pageClassName:"pagination-btn"+(a?" light-pagination":" dark-pagination"),breakClassName:"pagination-btn"+(a?" light-pagination":" dark-pagination"),activeClassName:a?" light-active":" dark-active",activeLinkClassName:"active-link",previousLabel:Object(n.jsx)(ie,{light:a}),nextLabel:Object(n.jsx)(oe,{light:a}),previousClassName:"previous-btn",nextClassName:"next-btn",onPageChange:function(e){var t=decodeURIComponent(r),a=e.selected+1,n=t.match(/&page=(\d{0,})/gm);if(n){var s=t.replace(n[0],"&page=".concat(a));c.push("/detail/".concat(s))}else c.push("/detail/".concat(r,"&page=").concat(a))},initialPage:0,forcePage:0})})),de=Object(p.b)((function(e){return{light:e.bookReducer.light,title:e.BookDetailReducer.title,description:e.BookDetailReducer.description,views:e.BookDetailReducer.views,created_date:e.BookDetailReducer.created_date,status:e.BookDetailReducer.status,category:e.BookDetailReducer.category,genre:e.BookDetailReducer.genre,types:e.BookDetailReducer.types,poster:e.BookDetailReducer.poster,is_liked:e.BookDetailReducer.is_liked,average_rating:e.BookDetailReducer.average_rating,chapters:e.BookDetailReducer.chapters,page_count:e.BookDetailReducer.page_count,chapterloading:e.BookDetailReducer.Chapterloading,bookLoading:e.BookDetailReducer.bookLoading,reviews:e.BookDetailReducer.reviews,id:e.BookDetailReducer.id,isAuth:e.ProfileReducer.isAuth,myuser:e.ProfileReducer.myuser}}),{getDetailBook:function(e,t){return function(a){a({type:"FETCHING_BOOK"}),ae.getDetailBook(e,t).then((function(e){a(te(e))}))}},getChapters:ne,GET_DETAIL_BOOK:te,getReviews:function(e){return function(t){t({type:"FETCHING_PAGES"}),ae.getReviews(e).then((function(e){t(function(e){return{type:"GET_REVIEWS",data:e}}(e))}))}}})(Object(o.f)((function(e){var t=e.light,a=e.params,s=e.history,i=e.getDetailBook,o=e.getChapters,l=e.title,d=e.description,u=e.views,b=e.created_date,j=e.status,p=e.category,h=e.genre,m=e.types,g=e.poster,f=e.is_liked,O=e.average_rating,x=e.chapters,v=e.page_count,k=e.chapterloading,w=e.bookLoading,y=e.isAuth,N=e.id,E=e.GET_DETAIL_BOOK,T=e.getReviews,C=e.reviews,R=e.myuser,S=Object(r.useState)(1),A=Object(M.a)(S,2),B=A[0],I=A[1],D=Object(r.useState)(0),G=Object(M.a)(D,2),P=G[0],L=G[1],U=Object(r.useState)(!1),z=Object(M.a)(U,2),F=z[0],J=z[1];Object(r.useEffect)((function(){var e=decodeURIComponent(a.id),t=JSON.parse(localStorage.getItem("access")),n=e.match(/id=(\d{0,})/gm)[0].replace("id=","");i(n,t),o(n),T(n),L(n)}),[i,o,T]),Object(r.useEffect)((function(){var e=decodeURIComponent(a.id).match(/&page=(\d{0,})/gm);if(e){var t=e[0].replace("&page=","");o(P,t)}}),[a,P,o]);return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(H,{}),Object(n.jsxs)("div",{className:"detail-wrapper "+(t?"light-bg":"black-bg"),children:[Object(n.jsxs)("svg",{style:{display:"none"},children:[Object(n.jsx)("symbol",{id:"star",viewBox:"0 -10 511.98685 511",children:Object(n.jsx)("g",{children:Object(n.jsx)("path",{d:"m510.652344 185.902344c-3.351563-10.367188-12.546875-17.730469-23.425782-18.710938l-147.773437-13.417968-58.433594-136.769532c-4.308593-10.023437-14.121093-16.511718-25.023437-16.511718s-20.714844 6.488281-25.023438 16.535156l-58.433594 136.746094-147.796874 13.417968c-10.859376 1.003906-20.03125 8.34375-23.402344 18.710938-3.371094 10.367187-.257813 21.738281 7.957031 28.90625l111.699219 97.960937-32.9375 145.089844c-2.410156 10.667969 1.730468 21.695313 10.582031 28.09375 4.757813 3.4375 10.324219 5.1875 15.9375 5.1875 4.839844 0 9.640625-1.304687 13.949219-3.882813l127.46875-76.183593 127.421875 76.183593c9.324219 5.609376 21.078125 5.097657 29.910156-1.304687 8.855469-6.417969 12.992187-17.449219 10.582031-28.09375l-32.9375-145.089844 111.699219-97.941406c8.214844-7.1875 11.351563-18.539063 7.980469-28.925781zm0 0",fill:"#ffc107"})})}),Object(n.jsx)("symbol",{id:"heart",viewBox:"0 0 512 512",children:Object(n.jsx)("g",{children:Object(n.jsx)("path",{d:"m246.122 477.289c-144.417-126.367-246.122-193.304-246.122-299.774 0-80.513 57.4-146.515 136-146.515 54.544 0 95.017 33.497 120 81.015 24.981-47.515 65.454-81.015 120-81.015 78.609 0 136 66.015 136 146.515 0 106.457-101.572 173.291-246.122 299.773-5.657 4.949-14.1 4.949-19.756.001z"})})}),Object(n.jsx)("symbol",{id:"eye",viewBox:"0 0 511.999 511.999",children:Object(n.jsxs)("g",{children:[Object(n.jsx)("g",{children:Object(n.jsx)("g",{children:Object(n.jsx)("path",{d:"M508.745,246.041c-4.574-6.257-113.557-153.206-252.748-153.206S7.818,239.784,3.249,246.035\r c-4.332,5.936-4.332,13.987,0,19.923c4.569,6.257,113.557,153.206,252.748,153.206s248.174-146.95,252.748-153.201\r C513.083,260.028,513.083,251.971,508.745,246.041z M255.997,385.406c-102.529,0-191.33-97.533-217.617-129.418\r c26.253-31.913,114.868-129.395,217.617-129.395c102.524,0,191.319,97.516,217.617,129.418\r C447.361,287.923,358.746,385.406,255.997,385.406z"})})}),Object(n.jsx)("g",{children:Object(n.jsx)("g",{children:Object(n.jsx)("path",{d:"M255.997,154.725c-55.842,0-101.275,45.433-101.275,101.275s45.433,101.275,101.275,101.275\r s101.275-45.433,101.275-101.275S311.839,154.725,255.997,154.725z M255.997,323.516c-37.23,0-67.516-30.287-67.516-67.516\r s30.287-67.516,67.516-67.516s67.516,30.287,67.516,67.516S293.227,323.516,255.997,323.516z"})})})]})})]}),Object(n.jsx)("div",{className:"detail-container",children:w?Object(n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"5vh"},children:Object(n.jsx)("div",{className:"spinner-border",role:"status",children:Object(n.jsx)("span",{className:"sr-only"})})}):Object(n.jsxs)("div",{className:"detail-block row "+(t?"detail-block-lt":"detail-block-bl"),children:[Object(n.jsxs)("div",{className:"detail-img-block col-12 col-sm-3 p-0",children:[Object(n.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},className:"d-image-wrapper",children:Object(n.jsx)("img",{src:g,className:"detail-img",alt:"poster"})}),Object(n.jsx)("div",{className:"read",children:Object(n.jsx)("button",{className:"btn btn-block",onClick:function(){return I(2)},style:{background:"#4e6baf"},children:"\u0427\u0438\u0442\u0430\u0442\u044c"})})]}),Object(n.jsxs)("div",{className:"detail-info-block col-12 col-sm-9",style:t?{color:"black"}:{color:"white"},children:[Object(n.jsxs)("div",{className:"detail-header",children:[Object(n.jsxs)("h2",{style:{overflowX:"auto",overflowY:"hidden"},children:[l," (",j,")"]}),Object(n.jsxs)("div",{className:"header-display",children:[Object(n.jsxs)("div",{style:{marginRight:"5%",display:"flex",alignItems:"center"},children:[Object(n.jsx)("svg",{className:"icon-detail",onClick:function(){return J(!0)},children:Object(n.jsx)("use",{xlinkHref:"#star"})}),Object(n.jsx)("span",{className:"star-value",children:O})]}),Object(n.jsx)("div",{style:{marginRight:"5%",display:"flex",alignItems:"center"},children:Object(n.jsx)("svg",{className:"icon-detail heart"+(f?" liked":""),onClick:function(){return function(){if(y||JSON.parse(localStorage.getItem("isAuth"))){var e=new _,t=localStorage.getItem("access").slice(1,-1);e.setLike(N,t).then((function(e){E(e)}))}else s.push("/login/")}()},children:Object(n.jsx)("use",{xlinkHref:"#heart"})})}),Object(n.jsxs)("div",{style:{marginRight:"5%",display:"flex",alignItems:"center"},children:[Object(n.jsx)("svg",{className:"icon-detail eye",children:Object(n.jsx)("use",{xlinkHref:"#eye"})}),Object(n.jsx)("span",{className:"star-value",children:u})]}),Object(n.jsx)("div",{style:{marginRight:"5%",display:"flex",alignItems:"center",fontSize:"18px"},children:Object(n.jsx)("span",{className:"star-value",children:m})}),Object(n.jsx)("div",{style:{marginRight:"5%",display:"flex",fontSize:"18px",alignItems:"center"},children:Object(n.jsx)("span",{className:"star-value",children:b})})]})]}),Object(n.jsxs)("div",{className:"detail-main",children:[Object(n.jsxs)("div",{className:"detail-nav",children:[Object(n.jsx)("span",{className:"nav-btn "+(1===B?"active-btn":""),onClick:function(){I(1)},children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(n.jsx)("span",{className:"nav-btn "+(2===B?"active-btn":""),onClick:function(){I(2)},children:"\u0413\u043b\u0430\u0432\u044b"}),Object(n.jsx)("span",{className:"nav-btn "+(3===B?"active-btn":""),onClick:function(){I(3)},children:"\u041e\u0442\u0437\u044b\u0432\u044b"})]}),1===B&&Object(n.jsxs)("div",{className:"detail-description",children:[Object(n.jsxs)("div",{className:"detail-genres",children:[Object(n.jsxs)("span",{style:{display:"block",overflowX:"scroll"},children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f:"," ",p.map((function(e){return Object(n.jsxs)("span",{children:[e,", "]},e)}))]}),Object(n.jsxs)("span",{style:{display:"block"},children:["\u0416\u0430\u043d\u0440:"," ",h.map((function(e){return Object(n.jsxs)("span",{children:[e,", "]},e)}))]})]}),Object(n.jsx)("h6",{children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "}),Object(n.jsx)("div",{className:"description",children:d})]}),2===B&&Object(n.jsxs)("div",{className:"chapter-block",children:[k?Object(n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"5vh"},children:Object(n.jsx)("div",{className:"spinner-border",role:"status",children:Object(n.jsx)("span",{className:"sr-only"})})}):x.map((function(e){return Object(n.jsx)(ce,{item:e},e.id)})),Object(n.jsx)(le,{light:t,params:a.id,numPage:v})]}),3===B&&Object(n.jsx)("div",{style:{marginLeft:"5px",paddingTop:"10px"},children:C.length>0?C.map((function(e){return Object(n.jsx)(se,{item:e,light:t},e)})):Object(n.jsx)("span",{children:"\u041e\u0442\u0437\u044b\u0432\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442.\u0421\u0442\u0430\u043d\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c"})})]})]})]})})]}),Object(n.jsx)(re,{isOpen:F,setOpen:J,isAuth:y,book_id:P,user_id:R.id})]})}))),ue=Object(p.b)((function(e){return{chapters:e.BookDetailReducer.all_chapters}}),{getNotOrderedChapterByBook:function(e){return function(t){t({type:"FETCHING_CHAPTER"}),ae.getNotOrderedChapterByBook(e).then((function(e){t(function(e){return{type:"GET_NOT_ORD_CHAPTERS",data:e}}(e))}))}}})(Object(o.f)((function(e){var t=e.info,a=e.chapters,c=e.getNotOrderedChapterByBook,s=e.history,i=void 0!==t.book?t.book.title:null,o=void 0!==t.book?t.book.id:null,l=t.chapter_num?t.chapter_num.replace("\u0413\u043b\u0430\u0432\u0430 ",""):null;return Object(r.useEffect)((function(){null!==o&&c(o)}),[o,c]),Object(r.useEffect)((function(){var e=window.pageYOffset;window.onscroll=function(){var t=window.pageYOffset,a=document.getElementById("page-nav");a&&(a.style.top=e>t?"0":"-50px"),e=t}}),[]),Object(n.jsxs)("nav",{className:"my-nav",style:{position:"fixed",gridTemplateColumns:(window.screen.width,"1fr 3fr 1fr"),padding:"0 8% 0 8%",transition:"top 0.3s"},id:"page-nav",children:[Object(n.jsx)("svg",{style:{display:"none"},children:Object(n.jsx)("symbol",{id:"back-arrow",viewBox:"0 0 512 512",children:Object(n.jsx)("g",{children:Object(n.jsx)("g",{children:Object(n.jsx)("path",{d:"M492,236H68.442l70.164-69.824c7.829-7.792,7.859-20.455,0.067-28.284c-7.792-7.83-20.456-7.859-28.285-0.068\r l-104.504,104c-0.007,0.006-0.012,0.013-0.018,0.019c-7.809,7.792-7.834,20.496-0.002,28.314c0.007,0.006,0.012,0.013,0.018,0.019\r l104.504,104c7.828,7.79,20.492,7.763,28.285-0.068c7.792-7.829,7.762-20.492-0.067-28.284L68.442,276H492\r c11.046,0,20-8.954,20-20C512,244.954,503.046,236,492,236z"})})})})}),Object(n.jsxs)("div",{className:"main-nav-part",children:[Object(n.jsx)("div",{children:Object(n.jsx)(I.b,{to:"/",style:{textDecoration:"none"},children:Object(n.jsx)("h3",{className:"title-brand",children:window.screen.width>800?Object(n.jsx)("span",{children:"Title"}):Object(n.jsx)("span",{children:"TL"})})})}),window.screen.width>800?Object(n.jsx)(I.b,{to:"/filter/",style:{textDecoration:"none"},children:Object(n.jsxs)("div",{className:"cat-link",children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-bar-chart-line-fill cat-icon",viewBox:"0 0 16 16",children:Object(n.jsx)("path",{d:"M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2z"})}),Object(n.jsx)("span",{children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})]})}):null]}),Object(n.jsxs)("div",{className:"center-nav-part",children:[window.screen.width>1100?Object(n.jsx)(I.b,{to:"/detail/id=".concat(o),style:{textDecoration:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"150px",overflowX:"hidden",color:"white"},children:i}):Object(n.jsx)(I.b,{to:"/detail/id=".concat(o),style:{textDecoration:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"150px",overflowX:"hidden",color:"white"},children:Object(n.jsx)("svg",{className:"back-arrow",children:Object(n.jsx)("use",{xlinkHref:"#back-arrow"})})}),Object(n.jsxs)("div",{className:"chapter-nav",children:[t.previous?Object(n.jsx)("span",{className:"chapter-arrow left",onClick:function(){return s.push("/detail/pages/"+t.previous)},children:"\u2039"}):null,Object(n.jsx)("span",{className:"nav-title-ch",children:window.screen.width<700?l:t.chapter_num}),t.next?Object(n.jsx)("span",{className:"chapter-arrow right",onClick:function(){return s.push("/detail/pages/"+t.next)},children:"\u203a"}):null,Object(n.jsx)("div",{className:"ch-dropdown",children:Object(n.jsx)("ul",{className:"ch-list m-0",children:a.map((function(e){return Object(n.jsx)("li",{className:e.title===t.title?"active-cp":"",onClick:function(){return s.push("/detail/pages/"+e.id)},children:e.chapter_num})}))})})]})]}),Object(n.jsx)("div",{className:"right-side-nav",children:Object(n.jsx)(I.b,{to:"/me/",children:Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-person-lines-fill profileIcon",viewBox:"0 0 16 16",children:Object(n.jsx)("path",{d:"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"})})})})]})}))),be=Object(p.b)((function(e){return{pages:e.BookDetailReducer.pages,info:e.BookDetailReducer.pages_info,pages_loading:e.BookDetailReducer.pages_loading}}),{getPages:function(e){return function(t){t({type:"FETCHING_PAGES"}),ae.getPagesByChapter(e).then((function(e){t(function(e){return{type:"GET_PAGES",data:e}}(e))}))}},getChapters:ne})((function(e){var t=e.params,a=e.pages,s=e.getPages,i=e.info,o=e.pages_loading,l=e.getChapters,d=void 0!==i.book?i.book.id:null;return console.log(i),Object(r.useEffect)((function(){var e=decodeURIComponent(t.id);s(e)}),[t,s]),Object(r.useEffect)((function(){d&&l(d)}),[d,l]),Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(ue,{info:i,getChapters:l}),Object(n.jsx)("div",{className:"pages-wrapper",children:Object(n.jsx)("div",{className:"custom-container",children:Object(n.jsx)("div",{style:{display:"grid",justifyContent:"center"},children:o?Object(n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"5vh"},children:Object(n.jsx)("div",{className:"spinner-border",role:"status",children:Object(n.jsx)("span",{className:"sr-only"})})}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{style:{color:"white"},children:i.title}),Object(n.jsxs)("span",{children:["\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430: ",i.created_date]}),Object(n.jsx)("div",{style:{display:"grid",justifyContent:"center"},children:a.length>0?a[0].map((function(e,t){return Object(n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center"},children:Object(n.jsx)("img",{src:e.picture,style:{maxWidth:"100%"},alt:"page"},t)})})):null})]})})})})]})})),je=a(264),pe=a(263),he=function(e){if(!e)return"Field is required"},me=function(e,t){if(console.log(t),e!==t.password)return"Passwords don't match"},ge=(a(65),function(e){var t=e.input,a=e.type,r=e.placeholder,c=e.label,s=e.meta,i=s.touched,o=s.error,l=s.warning,u=e.light;return Object(n.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(n.jsxs)("label",{className:"label",children:[c,":"]}),Object(n.jsx)("input",Object(d.a)(Object(d.a)({},t),{},{placeholder:r,type:a,className:"form-control "+(u?"light-input":"black-input")})),i&&(o&&Object(n.jsx)("span",{className:"text-danger",children:o})||l&&Object(n.jsx)("span",{className:"text-danger",children:l}))]})}),fe=function(e){var t=e.name,a=e.label,r=e.meta,c=r.touched,s=r.error,i=r.warning,o=e.light;return Object(n.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(n.jsxs)("label",{className:"label",children:[a,":"]}),Object(n.jsxs)("select",{name:t,className:"form-control "+(o?"light-input":"black-input"),style:o?{color:"aqua"}:{color:"red"},children:[Object(n.jsx)("option",{}),Object(n.jsx)("option",{value:"Male",children:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),Object(n.jsx)("option",{value:"Female",children:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"})]}),c&&(s&&Object(n.jsx)("span",{className:"text-danger",children:s})||i&&Object(n.jsx)("span",{className:"text-danger",children:i}))]})},Oe=function(e){return{light:e.bookReducer.light}};ge=Object(p.b)(Oe)(ge),fe=Object(p.b)(Oe)(fe);var xe=function(e){return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(H,{}),Object(n.jsx)("div",{className:"wrapper ",children:Object(n.jsx)("div",{className:"form-wrapper "+(e.light?"light-bg":"black-bg"),children:Object(n.jsx)("div",{className:"custom-container",children:Object(n.jsx)("div",{className:"form-block",children:Object(n.jsxs)("form",{className:"login-form "+(e.light?"light-form":"black-form"),onSubmit:e.handleSubmit((function(t){(new Z).loginUser(t.username,t.password).then((function(t){e.SET_AUTH(),localStorage.setItem("access",JSON.stringify(t.access)),localStorage.setItem("refresh",JSON.stringify(t.refresh)),e.history.push("/"),window.location.reload(!1)})).catch((function(){e.AUTH_ERROR()}))})),children:[Object(n.jsx)("div",{className:"form-title",children:Object(n.jsx)("h5",{children:"LOGIN"})}),e.authError?Object(n.jsx)("span",{className:"text-danger",children:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}):null,Object(n.jsx)(je.a,{name:"username",component:ge,type:"text",placeholder:"Username",className:"form-control",props:{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043b\u043e\u0433\u0438\u043d"},validate:[he]}),Object(n.jsx)(je.a,{name:"password",component:ge,type:"password",placeholder:"Password",className:"form-control",props:{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"},validate:[he]}),Object(n.jsx)("button",{className:"btn btn-warning form-btn",style:{marginBottom:"20px"},type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsxs)("span",{children:["\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? ",Object(n.jsx)(I.b,{to:"/register/",children:"Sign Up"})]})]})})})})})]})};xe=Object(pe.a)({form:"login-from"})(xe);var ve=Object(p.b)((function(e){return{light:e.bookReducer.light,isAuth:e.ProfileReducer.isAuth,authError:e.ProfileReducer.authError}}),{SET_AUTH:Y,DEL_AUTH:V,AUTH_ERROR:function(){return{type:"AUTH_ERROR"}}})(Object(o.f)(xe)),ke=function(e){var t=Object(r.useState)(null),a=Object(M.a)(t,2),s=a[0],i=a[1];return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(H,{}),Object(n.jsx)("div",{className:"wrapper ",children:Object(n.jsx)("div",{className:"form-wrapper "+(e.light?"light-bg":"black-bg"),children:Object(n.jsx)("div",{className:"custom-container",children:Object(n.jsx)("div",{className:"form-block",children:Object(n.jsxs)("form",{className:"login-form "+(e.light?"light-form":"black-form"),onSubmit:e.handleSubmit((function(t){var a=new Z,n="empty"===t.gender?null:t.gender;a.createUser(t.username,t.password,t.re_password,n,t.name).then((function(t){localStorage.setItem("access",JSON.stringify(t.access)),localStorage.setItem("refresh",JSON.stringify(t.refresh)),e.history.push("/")})).catch((function(e){var t=Object.keys(e.response.data),a=[];t.forEach((function(t){a.push.apply(a,Object(P.a)(e.response.data[t]))})),i(a)}))})),children:[Object(n.jsx)("div",{className:"form-title",children:Object(n.jsx)("h5",{children:"Register"})}),Object(n.jsx)(je.a,{name:"name",component:ge,type:"text",placeholder:"\u0418\u043c\u044f",className:"form-control",props:{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0438\u043c\u044f"},validate:[he]}),Object(n.jsx)(je.a,{name:"username",component:ge,type:"text",placeholder:"Username",className:"form-control",props:{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043d\u0438\u043a\u043d\u0435\u0439\u043c"},validate:[he]}),Object(n.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(n.jsx)("label",{className:"label",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b:"}),Object(n.jsxs)(je.a,{name:"gender",type:"text",component:"select",props:{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b"},className:"form-control "+(e.light?"light-input":"black-input"),style:e.light?{color:"aqua"}:{color:"red"},children:[Object(n.jsx)("option",{value:"empty"}),Object(n.jsx)("option",{value:"male",children:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),Object(n.jsx)("option",{value:"female",children:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"})]})]}),Object(n.jsx)(je.a,{name:"password",component:ge,type:"password",placeholder:"Password",className:"form-control",props:{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"},validate:[he]}),Object(n.jsx)(je.a,{name:"re_password",component:ge,type:"password",placeholder:"Password",className:"form-control",props:{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"},validate:[he,me]}),s?s.map((function(e){return Object(n.jsx)("span",{className:"text-danger d-block",children:e},e)})):null,Object(n.jsx)("button",{className:"btn btn-warning form-btn",type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})})})})]})};ke=Object(pe.a)({form:"register-from"})(ke);var we=Object(p.b)((function(e){return{light:e.bookReducer.light}}))(ke),ye=function(e){var t=e.isOpen,a=e.setOpen,c=Object(r.useRef)(null),s=Object(r.useState)([]),i=Object(M.a)(s,2),o=i[0],l=i[1],d=function(){var e=Object(f.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Z,a=c.current.files,(n=new FormData).append("image",a[0],a[0].name),t.setimage(n,localStorage.getItem("access").slice(1,-1)).then((function(e){l(["success","\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e"])})).catch((function(e){l(["danger","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"])}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)("div",{className:"popup-background",children:Object(n.jsxs)("div",{className:"popup-form",children:[Object(n.jsx)("span",{className:"close",onClick:function(){return a(!1)},children:"X"}),o!==[]?Object(n.jsx)("span",{className:"text-".concat(o[0]," d-block"),children:o[1]}):null,Object(n.jsx)("input",{type:"file",ref:c,style:{display:"block"}}),Object(n.jsx)("button",{className:"btn btn-warning d-block mt-2",onClick:function(){return d()},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})}):null},Ne=function(e){var t=Object(r.useState)(1),a=Object(M.a)(t,2),s=a[0],i=a[1],l=Object(r.useState)(!1),d=Object(M.a)(l,2),u=d[0],b=d[1];Object(r.useEffect)((function(){if(localStorage.getItem("access")){var t=localStorage.getItem("access").slice(1,-1);e.getMyUser(t)}}),[e]);return e.isAuth||JSON.parse(localStorage.getItem("isAuth"))?Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(H,{}),Object(n.jsxs)("div",{className:"wrapper",children:[Object(n.jsx)("div",{className:"profile-wrapper "+(e.light?"light-bg":"black-bg"),children:Object(n.jsx)("div",{className:"custom-container",children:Object(n.jsxs)("div",{className:"detail-block row "+(e.light?"detail-block-lt":"detail-block-bl"),children:[Object(n.jsxs)("div",{className:"detail-img-block col-12 col-lg-3",children:[Object(n.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},className:"p-image",children:Object(n.jsx)("img",{src:e.myuser.image,className:"profile-img",alt:"profile-img"})}),Object(n.jsx)("div",{className:"read",children:Object(n.jsx)("button",{className:"btn btn-success btn-block",onClick:function(){return b(!u)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})})]}),Object(n.jsx)("div",{className:"detail-info-block col-12 col-lg-9",style:e.light?{color:"black"}:{color:"white"},children:Object(n.jsxs)("div",{className:"detail-main",children:[Object(n.jsxs)("div",{className:"detail-nav prof-nav",children:[Object(n.jsx)("span",{className:"nav-btn "+(1===s?"active-btn":""),onClick:function(){i(1)},children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),Object(n.jsx)("span",{className:"nav-btn "+(2===s?"active-btn":""),onClick:function(){i(2)},children:"\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u0432\u0448\u0438\u0435\u0441\u044f"})]}),1===s?Object(n.jsxs)("form",{style:{marginLeft:"10px"},onSubmit:e.handleSubmit((function(t){var a=new Z,n=localStorage.getItem("access").slice(1,-1);a.changeMyProfile(t.username,t.name,t.gender,n),e.getMyUser(n)})),children:[Object(n.jsx)(je.a,{name:"name",component:ge,type:"text",placeholder:"Name",className:"form-control",props:{label:"\u0412\u0430\u0448\u0435 \u0418\u043c\u044f"},validate:[he],onChange:function(e){return console.log(e.target.value)}}),Object(n.jsx)(je.a,{name:"username",component:ge,type:"text",placeholder:"Username",className:"form-control",props:{label:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d"},validate:[he]}),Object(n.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(n.jsx)("label",{className:"label",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b:"}),Object(n.jsxs)(je.a,{name:"gender",type:"text",component:"select",props:{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b"},className:"form-control "+(e.light?"light-input":"black-input"),style:e.light?{color:"aqua"}:{color:"red"},children:[Object(n.jsx)("option",{value:"male",children:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),Object(n.jsx)("option",{value:"female",children:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"})]})]}),Object(n.jsx)("button",{className:"btn btn-warning btn-block",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"}),Object(n.jsx)("button",{className:"btn btn-danger btn-block",style:{marginTop:"15px"},onClick:function(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),e.DEL_AUTH(),window.location.reload(!1),e.history.push("/")},children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(n.jsx)("div",{className:"row",children:e.myuser.books_like.slice(0,6).map((function(e){return Object(n.jsx)("div",{className:"col-xl-4 col-md-4 col-6",style:{marginTop:"15px"},children:Object(n.jsx)(j,{item:e})},e)}))})]})})]})})}),Object(n.jsx)(ye,{isOpen:u,setOpen:b})]})]}):Object(n.jsx)(o.a,{to:"/login/"})};Ne=Object(pe.a)({form:"profile",enableReinitialize:!0})(Ne);var _e=Object(p.b)((function(e){return{light:e.bookReducer.light,isAuth:e.ProfileReducer.isAuth,myuser:e.ProfileReducer.myuser,initialValues:{name:e.ProfileReducer.myuser.first_name,username:e.ProfileReducer.myuser.username,gender:e.ProfileReducer.myuser.gender}}}),{SET_AUTH:Y,DEL_AUTH:V,getMyUser:ee})(Object(o.f)(Ne)),Ee=Object(p.b)((function(e){return{light:e.bookReducer.light,user:e.ProfileReducer.user}}),{getUserById:function(e){return function(t){$.getUserById(e).then((function(e){t(function(e){return{type:"GET_USER_BY_ID",data:e}}(e))}))}}})(Object(o.f)((function(e){var t,a=e.params,s=e.light,i=e.user,o=e.getUserById;if(Object(r.useEffect)((function(){var e=decodeURIComponent(a);o(e)}),[o,a]),void 0!==i.date_joined){var l=i.date_joined.indexOf("T");t=i.date_joined.slice(0,l)}return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(H,{}),Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)("div",{className:"profile-wrapper "+(s?"light-bg":"black-bg"),children:Object(n.jsx)("div",{className:"custom-container",children:Object(n.jsxs)("div",{className:"detail-block row "+(s?"detail-block-lt":"detail-block-bl"),children:[Object(n.jsx)("div",{className:"detail-img-block col-12 col-lg-3",children:Object(n.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:Object(n.jsx)("img",{src:i.image,className:"detail-img profile-img",alt:"profile-img"})})}),Object(n.jsxs)("div",{className:"detail-info-block col-12 col-lg-9",style:s?{color:"black"}:{color:"white"},children:[Object(n.jsx)("div",{className:"detail-nav",children:Object(n.jsx)("span",{className:"nav-btn active-btn",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})}),Object(n.jsxs)("div",{style:{marginLeft:"10px"},children:[Object(n.jsx)("div",{children:Object(n.jsxs)("h6",{children:["\u0418\u043c\u044f: ",Object(n.jsx)("span",{children:i.first_name})]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("h6",{children:["\u041d\u0438\u043a\u043d\u0435\u0439\u043c: ",Object(n.jsx)("span",{children:i.username})]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("h6",{children:["\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f: ",Object(n.jsx)("span",{children:t})]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("h6",{children:["\u041f\u043e\u043b:"," ",Object(n.jsx)("span",{children:i.gender?i.gender:"\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d"})]})})]})]})]})})})})]})}))),Te=function(){var e=Object(f.a)(g.a.mark((function e(t,a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t||""===a){e.next=8;break}return n=t.slice(1,-1),e.next=4,k.a.post("https://prod-reading.herokuapp.com/auth/jwt/verify/",{token:n}).catch((function(){return!1}));case 4:if(!1!==e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(f.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("access"),a=localStorage.getItem("refresh"),null!==t&&null!==a){e.next=7;break}return localStorage.setItem("isAuth",JSON.stringify(!1)),e.abrupt("return",!1);case 7:return e.next=9,Te(t,a);case 9:if(!1!==e.sent){e.next=17;break}return localStorage.setItem("isAuth",JSON.stringify(!1)),localStorage.removeItem("access"),localStorage.removeItem("refresh"),e.abrupt("return",!1);case 17:return localStorage.setItem("isAuth",JSON.stringify(!0)),e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=Object(p.b)(null,{CHANGE_THEME:h,SET_AUTH:Y,DEL_AUTH:V,getMyUser:ee})((function(e){e.CHANGE_THEME;var t=e.SET_AUTH,a=e.DEL_AUTH,c=e.getMyUser;return Object(r.useEffect)((function(){Ce().then((function(e){if(e){t();var n=localStorage.getItem("access").slice(1,-1);c(n)}else a()}))}),[c,t,a]),Object(n.jsxs)("div",{style:{position:"relative",width:"100%"},children:[Object(n.jsx)(o.b,{path:"/",component:D,exact:!0}),Object(n.jsx)(o.b,{path:"/filter/:name?",render:function(e){var t=e.match;return Object(n.jsx)(X,{params:t.params})},exact:!0}),Object(n.jsx)(o.b,{path:"/detail/:id",render:function(e){var t=e.match;return Object(n.jsx)(de,{params:t.params})},exact:!0}),Object(n.jsx)(o.b,{path:"/detail/pages/:id",render:function(e){var t=e.match;return Object(n.jsx)(be,{params:t.params})},exact:!0}),Object(n.jsx)(o.b,{path:"/login/",component:ve,exact:!0}),Object(n.jsx)(o.b,{path:"/register/",component:we,exact:!0}),Object(n.jsx)(o.b,{path:"/me/",component:_e,exact:!0}),Object(n.jsx)(o.b,{path:"/profile/:id?",render:function(e){var t=e.match;return Object(n.jsx)(Ee,{params:t.params.id})},exact:!0})]})})),Se=a(13),Ae=a(120),Be=a(265),Ie={mostRated:[],mostPopular:[],newest:[],booksLoading:!1,light:!1,types:[],genre:[],category:[],books:[],count:0,next:"",previous:""},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_DATA":return Object(d.a)(Object(d.a)({},e),{},{booksLoading:!0});case"GET_THE_MOST_RATED":return Object(d.a)(Object(d.a)({},e),{},{mostRated:t.data,booksLoading:!1});case"GET_THE_MOST_POPULAR":return Object(d.a)(Object(d.a)({},e),{},{mostPopular:t.data,booksLoading:!1});case"GET_THE_NEWEST":return Object(d.a)(Object(d.a)({},e),{},{newest:t.data,booksLoading:!1});case"GET_TYPES":return Object(d.a)(Object(d.a)({},e),{},{types:t.data});case"GET_GENRE":return Object(d.a)(Object(d.a)({},e),{},{genre:t.data});case"GET_CATEGORY":return Object(d.a)(Object(d.a)({},e),{},{category:t.data});case"GET_BOOKS":return Object(d.a)(Object(d.a)({},e),{},{books:t.data.results,count:t.data.page_count,next:t.data.next,previous:t.data.previous,booksLoading:!1});case"CHANGE_THEME":return Object(d.a)(Object(d.a)({},e),{},{light:!e.light});default:return e}},De={title:"",description:"",views:0,created_date:0,status:"",category:[],genre:[],types:"",poster:"",is_liked:!1,average_rating:0,id:0,chapters:[],all_chapters:[],page_count:0,count:0,Chapterloading:!1,bookLoading:!1,pages_info:[],pages:[],pages_loading:!1,reviews:[]},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_CHAPTER":return Object(d.a)(Object(d.a)({},e),{},{Chapterloading:!0});case"FETCHING_BOOK":return Object(d.a)(Object(d.a)({},e),{},{bookLoading:!0});case"FETCHING_PAGES":return Object(d.a)(Object(d.a)({},e),{},{pages_loading:!0});case"GET_DETAIL_BOOK":return Object(d.a)(Object(d.a)({},e),{},{title:t.data.title,description:t.data.description,views:t.data.views,created_date:t.data.created_date,status:t.data.status,category:t.data.category,genre:t.data.genre,types:t.data.types,poster:t.data.poster,is_liked:t.data.is_liked,average_rating:t.data.average_rating,id:t.data.id,bookLoading:!1});case"GET_CHAPTERS":return Object(d.a)(Object(d.a)({},e),{},{page_count:t.data.page_count,count:t.data.count,chapters:t.data.results,Chapterloading:!1});case"GET_NOT_ORD_CHAPTERS":return Object(d.a)(Object(d.a)({},e),{},{all_chapters:t.data});case"GET_PAGES":return Object(d.a)(Object(d.a)({},e),{},{pages_info:{title:t.data.title,created_date:t.data.created_date,book:t.data.book,previous:t.data.previous_chapter,next:t.data.next_chapter,chapter_num:t.data.chapter_num},pages:[t.data.page],pages_loading:!1});case"GET_REVIEWS":return Object(d.a)(Object(d.a)({},e),{},{reviews:t.data});default:return e}},Pe={isAuth:!1,authError:!1,myuser:[],user:[]},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH":return Object(d.a)(Object(d.a)({},e),{},{isAuth:!0});case"DEL_AUTH":return Object(d.a)(Object(d.a)({},e),{},{isAuth:!1});case"AUTH_ERROR":return Object(d.a)(Object(d.a)({},e),{},{authError:!0});case"GET_MY_USER":return Object(d.a)(Object(d.a)({},e),{},{myuser:t.data});case"GET_USER_BY_ID":return Object(d.a)(Object(d.a)({},e),{},{user:t.data});default:return e}},Ue=Object(Se.d)(Object(Se.c)({bookReducer:He,BookDetailReducer:Ge,ProfileReducer:Le,form:Be.a}),Object(Se.a)(Ae.a));i.a.render(Object(n.jsx)(p.a,{store:Ue,children:Object(n.jsx)(I.a,{children:Object(n.jsx)(Re,{})})}),document.getElementById("root"))},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},95:function(e,t,a){}},[[262,1,2]]]);
//# sourceMappingURL=main.d1ccaab6.chunk.js.map